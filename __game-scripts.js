(()=>{"use strict";var w={689:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,"#almostthereContainer {\n  z-index: 820;\n  background-color: #101118;\n}\n\n.xrextras-old-style #almostthereContainer {\n  background-color: #FFFFFF;\n}\n\n#qrcode {\n  background-color: white;\n  margin: 0 auto;\n  width: 250px;\n  height: 250px;\n  padding: 8px;\n  border-radius: 20px;\n  box-sizing: content-box;\n}\n\n#qrcode>svg {\n  width: 100%;\n  display: block;\n}\n\n.arrow-top-corner {\n  position: fixed;\n  top: 3%;\n  right: 1.5%;\n  height: 36px;\n}\n\n.arrow-top-close {\n  position: fixed;\n  top: 3%;\n  right: 12.5%;\n  height: 36px;\n}\n\n.arrow-bottom-close {\n  position: fixed;\n  bottom: 3%;\n  right: 15%;\n  height: 36px;\n  -moz-transform: scale(-1, -1);\n  -o-transform: scale(-1, -1);\n  -webkit-transform: scale(-1, -1);\n  transform: scale(-1, -1);\n}\n\n.arrow-bottom-corner {\n  position: fixed;\n  bottom: 3%;\n  right: 2%;\n  height: 36px;\n  -moz-transform: scale(-1, -1);\n  -o-transform: scale(-1, -1);\n  -webkit-transform: scale(-1, -1);\n  transform: scale(-1, -1);\n}\n\n.app-header-img {\n  position: fixed;\n  width: 100vw;\n  max-width: 500px;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n}\n\n.app-header-img.unknown {\n  position: fixed;\n  width: 100vw;\n  max-width: 500px;\n  left: 50%;\n  top: 43%;\n  transform: translateX(-50%) translateY(-57%);\n}\n\n.poweredby-img {\n  width: 35vw;\n  max-width: 200px;\n  position: fixed;\n  bottom: 2%;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.poweredby-img.desktop {\n  width: 200px;\n  bottom: 5%;\n}\n\n.bottombarbump .poweredby-img{\n  bottom: 15%;\n}\n\n#error_msg_open_in_safari {\n  background-color: #101118;\n}\n\n.xrextras-old-style #error_msg_open_in_safari {\n  background-color: white;\n}\n\n.open-header-top {\n  font-family: 'Nunito-SemiBold', sans-serif;\n  color: white;\n  letter-spacing: .37;\n  font-size: 1em;\n  position: fixed;\n  top: 0%;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.xrextras-old-style .open-header-top {\n  color: #323232;\n}\n\n.open-header-bottom {\n  font-family: 'Nunito-SemiBold', sans-serif;\n  color: white;\n  letter-spacing: .37;\n  font-size: 1em;\n  position: fixed;\n  top: 10%;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.xrextras-old-style .open-header-bottom {\n  color: #323232;\n}\n\n.open-header-unknown {\n  font-family: 'Nunito-SemiBold', sans-serif;\n  color: white;\n  letter-spacing: .37;\n  font-size: 1em;\n  position: fixed;\n  top: 5%;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.xrextras-old-style .open-header-unknown {\n  color: #323232;\n}\n\n.desktop-message {\n  font-family: 'Nunito-SemiBold', sans-serif;\n  margin: 0 auto;\n  margin-top: 1vh;\n  width: 500px;\n  color: white;\n  font-size: 24pt;\n  line-height: 1em;\n}\n\n.xrextras-old-style .desktop-message {\n  color: #323232;\n}\n\n.desktop-hint {\n  font-family: 'Nunito', sans-serif;\n  font-size: 14pt;\n  color: #fff;\n  line-height: 2em;\n  margin-top: 2vh;\n  letter-spacing: .37;\n}\n\n.xrextras-old-style .desktop-hint {\n  color: #323232;\n}\n\n.copy-link-btn {\n  position: fixed;\n  bottom: 20%;\n  left: 50%;\n  transform: translateX(-50%);\n  font-family: 'Nunito-SemiBold', sans-serif;\n  font-weight: 800;\n  font-size: 1.1em;\n  text-align: center;\n  color: white;\n  text-decoration: none;\n  border: none;\n  background-color: #AD50FF;\n  padding: 6px 13px;\n  border-radius: 10px;\n}\n\n.xrextras-old-style .copy-link-btn {\n  background-color: #7611B7;\n}\n\n.error-copy-link-copied {\n  background-color: #8083A2 !important;\n}\n\n.safari-hero-image {\n  max-height: 30vmin;\n}\n",""]);const P=D},136:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,"* {\n  font-family: inherit;\n  box-sizing: inherit;\n}\n\n.absolute-fill {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.hidden {\n  display: none !important;\n}\n\n.error-text-outer-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.error-text-container {\n  flex: 0 0 auto;\n  text-align: center;\n  width: 100%;\n}\n\n.error-text-header {\n  font-family: 'Nunito', sans-serif;\n  font-size: 16pt;\n  color: white;\n  letter-spacing: .37;\n  line-height: 23pt;\n}\n\n.xrextras-old-style .error-text-header {\n  color: #323232;\n}\n\n.error-text-hint {\n  font-family: 'Nunito', sans-serif;\n  font-size: 14pt;\n  color: #A8A8BA;\n  letter-spacing: .37;\n}\n\n.error-text-detail {\n  font-family: 'Nunito', sans-serif;\n  font-size: 14pt;\n  color: white;\n}\n\n.xrextras-old-style .error-text-detail {\n  color: #323232;\n}\n\n.error-margin-top-5 {\n  margin-top: 5vh;\n}\n\n.error-margin-top-20 {\n  margin-top: 20vh;\n}\n\n.desktop-home-link {\n  font-family: 'Nunito-SemiBold', sans-serif;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  padding-right: 10px;\n  border-radius: 10px;\n  color: white;\n  background-color: #464766;\n  -webkit-user-select: all;\n  /* Chrome 49+ */\n  -moz-user-select: all;\n  /* Firefox 43+ */\n  -ms-user-select: all;\n  /* No support yet */\n  user-select: all;\n  pointer-events: auto;\n}\n\n.xrextras-old-style .desktop-home-link {\n  color: #323232;\n  background-color:rgba(173, 80, 255, 0.2);\n}\n\n.desktop-home-link.mobile {\n  position: fixed;\n  width: 100vw;\n  font-size: 1.1em;\n  font-weight: 800;\n  border-radius: 0px;\n  bottom: 30%;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.xrextras-old-style .foreground-image {\n  filter: invert(1);\n}\n",""]);const P=D},854:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,"@font-face {\n  font-family: 'Raleway-Regular';\n  src: url('//cdn.8thwall.com/web/fonts/raleway-regular.woff') format('woff'), /* Modern Browsers */\n       url('//cdn.8thwall.com/web/fonts/raleway-regular.ttf')  format('truetype') /* Safari, Android, iOS */\n}\n\n@font-face {\n  font-family: 'Raleway-Bold';\n  src: url('//cdn.8thwall.com/web/fonts/raleway-bold.woff') format('woff'), /* Modern Browsers */\n       url('//cdn.8thwall.com/web/fonts/raleway-bold.ttf')  format('truetype') /* Safari, Android, iOS */\n}\n\n@font-face {\n  font-family: 'Varela-Round';\n  src: url('//cdn.8thwall.com/web/fonts/VarelaRound-Regular.woff') format('woff'), /* Modern Browsers */\n       url('//cdn.8thwall.com/web/fonts/VarelaRound-Regular.ttf')  format('truetype') /* Safari, Android, iOS */\n}\n\n@font-face {\n  font-family: 'Nunito';\n  src: url('//cdn.8thwall.com/web/fonts/Nunito-Regular.woff') format('woff'), /* Modern Browsers */\n       url('//cdn.8thwall.com/web/fonts/Nunito-Regular.ttf')  format('truetype') /* Safari, Android, iOS */\n}\n\n@font-face {\n  font-family: 'Nunito-SemiBold';\n  src: url('//cdn.8thwall.com/web/fonts/Nunito-SemiBold.woff') format('woff'), /* Modern Browsers */\n       url('//cdn.8thwall.com/web/fonts/Nunito-SemiBold.ttf')  format('truetype') /* Safari, Android, iOS */\n}",""]);const P=D},202:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,"#loadingContainer {\n  z-index: 800;\n  font-family: 'Nunito-SemiBold', sans-serif;\n}\n\n#loadBackground {\n  z-index: 10;\n  background-color: #101118;\n  pointer-events: auto;\n}\n\n.xrextras-old-style #loadBackground {\n  background-color: white;\n}\n\n#requestingCameraPermissions {\n  z-index: 11;\n  position: absolute;\n  top: 0;\n  width: 100vw;\n  text-align: center;\n  color: white;\n  font-size: 1.8em;\n  font-family: 'Nunito-SemiBold', sans-serif;\n  background-color: #464766;\n  padding-top: 3vh;\n  padding-bottom: 1.75vh;\n}\n\n#requestingCameraIcon {\n  display: block;\n  margin: 0 auto;\n  margin-bottom: 2vh;\n  height: 5.5vh;\n}\n\n#loadImage {\n  position: absolute;\n  margin-top: -2.5em;\n  margin-left: -2.5em;\n  top: 50%;\n  left: 50%;\n  height: 5em;\n  width: 5em;\n  transform: translate(-50%, -50%);\n}\n\n/* camera and micrphone permission related styles */\n#cameraPermissionsErrorApple, #microphonePermissionsErrorApple {\n  background-color: #101118;\n}\n\n.xrextras-old-style #cameraPermissionsErrorApple, .xrextras-old-style #microphonePermissionsErrorApple {\n  background-color: white;\n}\n\n#cameraPermissionsErrorAppleMessage, #microphonePermissionsErrorAppleMessage {\n  font-size: 1.75em;\n  text-align: center;\n  max-width: 90vw;\n  margin-top: 5vh;\n  margin-left: auto;\n  margin-right: auto;\n  color: white;\n}\n\n.xrextras-old-style #cameraPermissionsErrorAppleMessage, .xrextras-old-style #microphonePermissionsErrorAppleMessage {\n  color: #323232;\n}\n\n.permissionIconIos {\n  display: block;\n  margin: 0 auto;\n  margin-top: 17vh;\n  text-align: center;\n}\n.permissionIconIos img {\n  height: 20vw;\n}\n.permissionIconIos img + img {\n  margin-left: 10vw;\n}\n\n.bottom-message {\n  color: white;\n  padding: 0 5vw;\n  position: absolute;\n  bottom: 10vh;\n  text-align: center;\n  font-size: 1.25em;\n}\n\n#cameraPermissionsErrorAndroid, #microphonePermissionsErrorAndroid {\n  padding: 2vh 0;\n  display: flex;\n  flex-direction: column;\n  pointer-events: auto;\n  justify-content: space-around;\n  align-items: center;\n  background-color: #101118;\n}\n\n.xrextras-old-style #cameraPermissionsErrorAndroid, .xrextras-old-style #microphonePermissionsErrorAndroid {\n  background-color: white;\n}\n\n/* device motion permission related styles */\n\n#deviceMotionErrorApple {\n  padding: 3vh 2vh;\n  display: flex;\n  flex-direction: column;\n  pointer-events: auto;\n  justify-content: space-around;\n  align-items: center;\n  background-color: #101118;\n  color: white;\n}\n\n.xrextras-old-style #deviceMotionErrorApple {\n  color: #2D2E43;\n  background-color: white;\n}\n\n#linkOutViewAndroid, #copyLinkViewAndroid {\n  background-color: #101118;\n}\n\n.xrextras-old-style #linkOutViewAndroid, .xrextras-old-style #copyLinkViewAndroid {\n  background-color: #fff;\n}\n\n.permission-error {\n  padding: 3vh 5vh;\n  font-size: 3.5vh;\n  color: #fff;\n  background-color: #101118;\n}\n\n.xrextras-old-style .permission-error {\n  color: #323232;\n  background-color: white;\n}\n\n.permission-error>h1 {\n  font-size: 1.3em;\n}\n\n.main-button {\n  border: none;\n  outline: none;\n  background-color: #AD50FF;\n  color: white;\n  font-size: 2.5vh;\n  display: block;\n  margin-top: 2em;\n  padding: 0.5em 1em;\n  border-radius: 0.5em;\n}\n\n.xrextras-old-style .main-button {\n  background-color: #7611B7;\n}\n\n.start-ar-button {\n  position: fixed;\n  bottom: 25%;\n  left: 50%;\n  transform: translateX(-50%);\n  font-family: 'Nunito-SemiBold', sans-serif;\n  font-weight: 800;\n  font-size: 1.5em;\n  text-align: center;\n  color: white;\n  text-decoration: none;\n  border: none;\n  background-color: #AD50FF;\n  padding: 6px 13px;\n  border-radius: 10px;\n}\n\n.xrextras-old-style .start-ar-button {\n  background-color: #7611b7;\n}\n\n.permissionIcon {\n  overflow: hidden;\n  flex: 0 0 auto;\n  margin-bottom: 2vh;\n}\n\n.permissionIcon img {\n  display: block;\n  margin: 0 auto;\n  height: 5vh;\n}\n\n#cameraSelectionWorldTrackingError {\n  z-index: 999;\n  position: absolute;\n  top: 0;\n  width: 100vw;\n  text-align: center;\n  color: black;\n  font-size: 3.7vh;\n  background-color: white;\n  padding: 3vh 0;\n}\n\n.loading-error-header {\n  font-size: 3.5vh;\n  flex: 0 0 auto;\n  color: white;\n}\n\n.xrextras-old-style .loading-error-header {\n  color: #323232;\n}\n\n.loading-error-footer {\n  font-size: 3vh;\n  line-height: 5.5vh;\n  flex: 0 0 auto;\n  text-align: center;\n  width: 80vmin;\n  color: white;\n}\n\n.xrextras-old-style .loading-error-footer {\n  color: #323232;\n}\n\n.loading-error-footer img {\n  display: block;\n  height: 5vh;\n  margin: 0 auto;\n  margin-bottom: 2vh;\n}\n\n.loading-error-instructions {\n  font-family: 'Nunito', sans-serif;\n  color: #fff;\n  font-size: 2.5vh;\n  list-style: none;\n  margin-left: 1em;\n  counter-reset: line;\n  flex: 0 0 auto;\n}\n\n.xrextras-old-style .loading-error-instructions {\n  color: #2D2E43;\n}\n\n.loading-error-instructions>li {\n  position: relative;\n  margin-bottom: 4.5vh;\n}\n\n.loading-error-instructions>li>img {\n  max-height: 3vh;\n  vertical-align: middle;\n  margin: 0 .5vh;\n}\n\n.loading-error-instructions>li:before {\n  font-family: 'Nunito', sans-serif;\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  border-radius: 3vh;\n  color: #fff;\n  background-color: #464766;\n  text-align: center;\n  left: -8vh;\n  top: -1vh;\n  font-size: 2.5vh;\n  line-height: 5.5vh;\n  counter-increment: line;\n  content: counter(line);\n}\n\n.xrextras-old-style .loading-error-instructions>li:before {\n  background-color: rgba(218, 209, 228, 128);\n}\n\n.highlight {\n  color: white;\n  font-family: 'Nunito-SemiBold', sans-serif;\n  font-weight: 800;\n}\n\n.xrextras-old-style .highlight {\n  color: #7611B7;\n}\n\n.camera-instruction-block {\n  display: inline-block;\n  background-color: #8083A2;\n  padding: 1vh;\n}\n\n.xrextras-old-style .camera-instruction-block {\n  background-color: #EBEBEB;\n}\n\n.camera-instruction-button {\n  display: inline-block;\n  padding: 1vh;\n  background-color: #359AFF;\n  color: white;\n  font-size: 2vh;\n  box-shadow: 0 .125vh .25vh rgba(0, 0, 0, 0.5);\n}\n\nbody:not(.xrextras-old-style) .prompt-box-8w {\n  background-color: #3A3B55;\n  color: #fff;\n  text-align: center;\n}\n\nbody:not(.xrextras-old-style) .prompt-button-8w {\n  background-color: #8083A2;\n  border-radius: 10px;\n}\n\nbody:not(.xrextras-old-style) .button-primary-8w {\n  background-color: #AD50FF;\n}\n\n.fade-out {\n  animation: fade-out 0.3s linear forwards;\n}\n\n@keyframes fade-out {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n.spin {\n  animation: spin 1.1s cubic-bezier(0.785, 0.135, 0.150, 0.860) infinite both;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.scale {\n  -webkit-animation: scale 1s cubic-bezier(0.455, 0.030, 0.515, 0.955) infinite alternate-reverse both;\n  animation: scale 1s cubic-bezier(0.455, 0.030, 0.515, 0.955) infinite alternate-reverse both;\n}\n\n@keyframes scale {\n  0% {\n    -webkit-transform: scale(0.5);\n    transform: scale(0.5);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n  }\n}\n\n.pulse {\n  -webkit-animation: pulse 1s ease-in-out infinite both;\n  animation: pulse 1s ease-in-out infinite both;\n}\n\n@keyframes pulse {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n  }\n  50% {\n    -webkit-transform: scale(1.1);\n    transform: scale(1.1);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n  }\n}\n",""]);const P=D},583:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,"/* Preview Container */\n\n#previewContainer {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: space-between;\n  z-index: 30;\n  opacity: 0.0;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  box-sizing: border-box;\n  pointer-events: none;\n}\n\n#previewContainer.fade-in {\n  transition: 0.5s opacity;\n  opacity: 1;\n}\n\n#videoPreview, #imagePreview {\n  display: none;\n  max-width: 90vw;\n  max-height: calc(88vh - 12vmin);\n  border-radius: 10px;\n  border: 1vmin solid white;\n  background-color: white;\n}\n\n.icon-button img, #videoPreview, #imagePreview, .finalize-container {\n  filter: drop-shadow(0 0 2px #333);\n}\n\n.video-preview #videoPreview {\n  display: block;\n}\n\n.image-preview #imagePreview {\n  display: block;\n}\n\n/* Top Bar */\n\n.top-bar {\n  position: relative;\n  flex: 1 0 0;\n}\n\n.preview-box {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.icon-button {\n  padding: 4vmin;\n  user-select: none;\n  -webkit-user-select: none;\n  cursor: pointer;\n}\n\n.icon-button img {\n  display: block;\n  height: 7.5vmin;\n}\n\n#toggleMuteButton, #closePreviewButton {\n  position: absolute;\n  z-index: 1;\n}\n\n#toggleMuteButton {\n  left: 0;\n  bottom: 0;\n  display: none;\n}\n\n.video-preview #toggleMuteButton {\n  display: block;\n}\n\n#closePreviewButton {\n  top: 0;\n  right: 0;\n}\n\n/* Bottom Bar */\n\n.bottom-bar {\n  display: flex;\n  justify-content: center;\n  position: relative;\n  margin: 0 5vmin;\n}\n\n.style-reset {\n  background: none;\n  border: none;\n  outline: none;\n  box-shadow: none !important;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.style-reset:focus { outline:0; }\n\n#actionButton {\n  padding: 0.3em 0.5em 0.3em 0.5em;\n  user-select: none;\n  -webkit-user-select: none;\n  font-family: 'Nunito', sans-serif;\n  text-align: right;\n  color: white;\n  background-color: #AD50FF;\n  border-radius: 0.5em;\n  font-size: 5vmin;\n  min-width: 3.25em;\n}\n\n.show-with-download-button {\n  position: absolute;\n  top: 50%;\n  right: 0;\n  transform: translateY(-50%);\n}\n\n.show-alone {\n  margin-bottom: 2vmin;\n}\n\n#actionButton img {\n  height: 0.8em;\n  margin-left: 0.4em;\n}\n\n.disabled-download.video-preview #openSafariText {\n  display: block;\n  font-size: 5vmin;\n}\n\n.disabled-download.image-preview #tapAndHoldText {\n  display: block;\n  font-size: 7.5vmin;\n}\n\n#openSafariText, #tapAndHoldText {\n  display: none;\n  padding: 0.3em 0.5em 0.3em 0.5em;\n  user-select: none;\n  -webkit-user-select: none;\n  font-family: 'Nunito', sans-serif;\n  text-align: center;\n  color: white;\n  filter: drop-shadow(0px 1px 2px #333);\n}\n\n#previewContainer:not(.downloaded) .show-after-download {\n  display: none;\n}\n\n.finalize-container {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: calc(50% + 13vmin);\n  width: 25vmin;\n  text-align: center;\n  opacity: 0;\n  transition: 0.3s opacity;\n}\n\n.finalize-waiting .finalize-container {\n  opacity: 1;\n}\n\n#finalizeText {\n  color: white;\n  font-family: 'Nunito', sans-serif;\n  color: white;\n  font-size: 3.5vmin;\n  margin-bottom: 0.5vmin;\n  font-style: italic;\n}\n\n#finalizeProgressBar {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  background:  #B5B8D0;\n  border-radius: 0.75vmin;\n  overflow: hidden;\n  width: 100%;\n  height: 1.5vmin;\n  display: block;\n}\n\n#finalizeProgressBar::-webkit-progress-bar {\n  background: #B5B8D0;\n  border-radius: 0.75vmin;\n}\n\n#finalizeProgressBar::-webkit-progress-value {\n  border-radius: 0.75vmin;\n  background: white;\n  transition: 2s width;\n}\n\n#finalizeProgressBar::-moz-progress-bar {\n  border-radius: 0.75vmin;\n  background: white;\n}\n",""]);const P=D},498:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,".recorder-container {\n  position: fixed;\n  width: 25vmin;\n  height: 25vmin;\n  max-width: 10em;\n  max-height: 10em;\n  bottom: 3vmin;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 20;\n  transition: 0.5s opacity;\n}\n\n#recorder-button {\n  display: block;\n  border: none;\n  outline: none;\n  margin: 0;\n  padding: 0;\n  box-shadow: none;\n  position: absolute;\n  background: white;\n  border-radius: 50%;\n  color: transparent;\n  top: 0;\n  left: 0;\n  transform-origin: 50% 50%;\n  transform: scale(0.6);\n  transition: 0.3s border-radius, 0.3s transform;\n  width: 100%;\n  height: 100%;\n}\n\n.progress-container {\n  display: block;\n  position: absolute;\n  top:0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  transform: scale(0.9);\n  transition: 0.3s transform, 0.3s opacity;\n}\n\n.progress-track, .progress-bar, .loading-circle {\n  fill: transparent;\n  stroke-width: 3;\n}\n\n.progress-track {\n  stroke: white;\n}\n\n.progress-bar {\n  opacity: 0;\n  transition: 0;\n  transform-origin: 50% 50%;\n  stroke: white;\n  transform: rotate(-90deg);\n  stroke-dasharray: 100.531 100.531;\n  stroke-dashoffset: 100;\n}\n\n.recording .progress-container, .loading .progress-container {\n  opacity: 1;\n  transform: scale(1);\n}\n\n.recording .progress-track, .loading .progress-track {\n  transition: 0.8s stroke;\n  stroke: #fff5;\n}\n\n.recording .progress-bar {\n  opacity: 1;\n}\n\n.active #recorder-button {\n  transform: scale(0.5);\n}\n\n.active:not(.fixed-mode) #recorder-button {\n  background: #fff5;\n}\n\n.fixed-mode #recorder-button {\n  border-radius: 15%;\n  transform: scale(0.42);\n}\n\n.flash-element {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: white;\n  opacity: 0;\n  transition: 0.6s opacity;\n  pointer-events: none;\n  z-index: 40;\n}\n\n.flash-element.flashing {\n  transition: 0s opacity;\n  opacity: 1;\n  pointer-events: auto;\n  z-index: 100;\n}\n\n.loading-circle {\n  stroke-dasharray: 25 25 25 25;\n  stroke-dashoffset: 0;\n  stroke: white;\n  opacity: 0;\n  transform-origin: 50% 50%;\n}\n\n@keyframes record-button-spin {\n  0% {\n  transform: rotate(-90deg);\n  }\n  100% {\n    transform: rotate(270deg);\n  }\n}\n\n.loading .loading-circle {\n  animation: record-button-spin 1.1s linear infinite both;\n  opacity: 1;\n}\n\n.fade-container {\n  opacity: 0;\n  pointer-events: none;\n}\n",""]);const P=D},213:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,".pwa-installer-root {\n  position: fixed;\n  z-index: 1300;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  left: 0;\n  font-family: Nunito,Roboto,Arial,sans-serif;\n  font-size: 14px;\n  line-height: 1.43;\n}\n\n.pwa-installer-root .backdrop {\n  right: 0;\n  bottom: 0;\n  top: 0;\n  left: 0;\n  display: flex;\n  z-index: -1;\n  position: fixed;\n  align-items: center;\n  touch-action: none;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-tap-highlight-color: transparent;\n}\n\n.pwa-installer-root .drawer {\n  overflow-y: visible;\n  top: auto;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: auto;\n  max-height: 100%;\n  flex: 1 0 auto;\n  display: flex;\n  outline: 0;\n  z-index: 1200;\n  position: fixed;\n  flex-direction: column;\n  -webkit-overflow-scrolling: touch;\n  box-shadow: 0px 8px 10px -5px rgba(0,0,0,0.2),\n    0px 16px 24px 2px rgba(0,0,0,0.14),\n    0px 6px 30px 5px rgba(0,0,0,0.12);\n  color: rgba(0, 0, 0, 0.87);\n  transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  background-color: #ffffff;\n}\n\n.pwa-installer-root .drawer .container {\n  display: inline-block;\n}\n\n.pwa-installer-root .drawer .container .content {\n  display: flex;\n  padding: 2em;\n  align-items: center;\n  flex-direction: column;\n}\n\n.pwa-installer-root .drawer .container .content .close-button {\n  padding: 0;\n  position: absolute;\n  align-self: flex-end;\n  border: 0;\n  cursor: pointer;\n}\n\n.pwa-installer-root .drawer .container .content .close-button .close::before{\n  position: absolute;\n  content: ' ';\n  height: 2em;\n  width: 2px;\n  background-color: #333;\n}\n\n.pwa-installer-root .drawer .container .content .close-button .close::after{\n  position: absolute;\n  content: ' ';\n  height: 2em;\n  width: 2px;\n  background-color: #333;\n}\n\n.close::before {\n  transform: rotate(45deg);\n}\n\n.pwa-installer-root .drawer .container .content .close-button .close::after {\n  transform: rotate(-45deg);\n}\n\n.pwa-installer-root .drawer .container .content .icon-container {\n  filter: drop-shadow(0px 1px 2px rgba(0,0,0,0.3));\n}\n\n.pwa-installer-root .drawer .container .content .icon-container .icon-preview {\n  width: 6em;\n  height: 6em;\n  margin-top: -5em;\n  clip-path: inset(6.36% round 17.543%);\n  -webkit-clip-path: inset(6.36% round 17.543%);\n  object-fit: fill;\n}\n\n.pwa-installer-root .drawer .container .content .pwa-name {\n  margin-top: 0em;\n  font-weight: 700;\n  margin-bottom: 1em;\n}\n\n.pwa-installer-root .drawer .container .content .install-title {\n  margin: 0em;\n  font-weight: bold;\n}\n\n.pwa-installer-root .drawer .container .content .install-subtitle {\n  margin: 0em;\n}\n\n.pwa-installer-root .drawer .container .content .install-action-text {\n  margin: 0em;\n}\n\n.pwa-installer-root .drawer .container .content .install-action-text svg {\n  fill: currentColor;\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.5rem;\n  transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  flex-shrink: 0;\n  user-select: none;\n}\n\n.pwa-installer-root .drawer .container .content .install-button {\n  color: #FFFFFF;\n  margin-top: 1em;\n  background-color: #7611B6;\n  box-shadow: 0px 3px 1px -2px rgba(0,0,0,0.2),\n    0px 2px 2px 0px rgba(0,0,0,0.14),\n    0px 1px 5px 0px rgba(0,0,0,0.12);\n  padding: 6px 16px;\n  font-size: 0.875rem;\n  min-width: 64px;\n  box-sizing: border-box;\n  transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,\n    box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,\n    border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  font-weight: 500;\n  border-radius: 4px;\n  text-transform: uppercase;\n  font-family: Nunito,Roboto,Arial,sans-serif;\n  border: 0;\n  cursor: pointer;\n  display: inline-flex;\n  outline: 0;\n  position: relative;\n  align-items: center;\n  user-select: none;\n  vertical-align: center;\n  text-decoration: none;\n  -webkit-appearance: none;\n  -webkit-tap-highlight-color: transparent;\n}\n",""]);const P=D},493:(w,x,b)=>{b.d(x,{Z:()=>P});var y=b(81),E=b.n(y),C=b(645),D=b.n(C)()(E());D.push([w.id,"#runtimeErrorContainer {\n  z-index: 800;\n  background-color: #101118;\n}\n\n.xrextras-old-style #runtimeErrorContainer {\n  background-color: #FFFFFF;\n}\n\n.floater {\n  -webkit-filter: drop-shadow(5px 5px 5px #222);\n}\n",""]);const P=D},645:w=>{w.exports=function(w){var x=[];return x.toString=function(){return this.map((function(x){var b="",y=void 0!==x[5];return x[4]&&(b+="@supports (".concat(x[4],") {")),x[2]&&(b+="@media ".concat(x[2]," {")),y&&(b+="@layer".concat(x[5].length>0?" ".concat(x[5]):""," {")),b+=w(x),y&&(b+="}"),x[2]&&(b+="}"),x[4]&&(b+="}"),b})).join("")},x.i=function(w,b,y,E,C){"string"==typeof w&&(w=[[null,w,void 0]]);var D={};if(y)for(var P=0;P<this.length;P++){var X=this[P][0];null!=X&&(D[X]=!0)}for(var N=0;N<w.length;N++){var q=[].concat(w[N]);y&&D[q[0]]||(void 0!==C&&(void 0===q[5]||(q[1]="@layer".concat(q[5].length>0?" ".concat(q[5]):""," {").concat(q[1],"}")),q[5]=C),b&&(q[2]?(q[1]="@media ".concat(q[2]," {").concat(q[1],"}"),q[2]=b):q[2]=b),E&&(q[4]?(q[1]="@supports (".concat(q[4],") {").concat(q[1],"}"),q[4]=E):q[4]="".concat(E)),x.push(q))}},x}},81:w=>{w.exports=function(w){return w[1]}},379:w=>{var x=[];function n(w){for(var b=-1,y=0;y<x.length;y++)if(x[y].identifier===w){b=y;break}return b}function r(w,b){for(var y={},E=[],C=0;C<w.length;C++){var D=w[C],P=b.base?D[0]+b.base:D[0],X=y[P]||0,N="".concat(P," ").concat(X);y[P]=X+1;var q=n(N),U={css:D[1],media:D[2],sourceMap:D[3],supports:D[4],layer:D[5]};if(-1!==q)x[q].references++,x[q].updater(U);else{var V=i(U,b);b.byIndex=C,x.splice(C,0,{identifier:N,updater:V,references:1})}E.push(N)}return E}function i(w,x){var b=x.domAPI(x);return b.update(w),function(x){if(x){if(x.css===w.css&&x.media===w.media&&x.sourceMap===w.sourceMap&&x.supports===w.supports&&x.layer===w.layer)return;b.update(w=x)}else b.remove()}}w.exports=function(w,b){var y=r(w=w||[],b=b||{});return function(w){w=w||[];for(var E=0;E<y.length;E++){var C=n(y[E]);x[C].references--}for(var D=r(w,b),P=0;P<y.length;P++){var X=n(y[P]);0===x[X].references&&(x[X].updater(),x.splice(X,1))}y=D}}},569:w=>{var x={};w.exports=function(w,b){var y=function(w){if(void 0===x[w]){var b=document.querySelector(w);if(window.HTMLIFrameElement&&b instanceof window.HTMLIFrameElement)try{b=b.contentDocument.head}catch(w){b=null}x[w]=b}return x[w]}(w);if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(b)}},216:w=>{w.exports=function(w){var x=document.createElement("style");return w.setAttributes(x,w.attributes),w.insert(x,w.options),x}},565:(w,x,b)=>{w.exports=function(w){var x=b.nc;x&&w.setAttribute("nonce",x)}},795:w=>{w.exports=function(w){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var x=w.insertStyleElement(w);return{update:function(b){!function(w,x,b){var y="";b.supports&&(y+="@supports (".concat(b.supports,") {")),b.media&&(y+="@media ".concat(b.media," {"));var E=void 0!==b.layer;E&&(y+="@layer".concat(b.layer.length>0?" ".concat(b.layer):""," {")),y+=b.css,E&&(y+="}"),b.media&&(y+="}"),b.supports&&(y+="}");var C=b.sourceMap;C&&"undefined"!=typeof btoa&&(y+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(C))))," */")),x.styleTagTransform(y,w,x.options)}(x,w,b)},remove:function(){!function(w){if(null===w.parentNode)return!1;w.parentNode.removeChild(w)}(x)}}}},589:w=>{w.exports=function(w,x){if(x.styleSheet)x.styleSheet.cssText=w;else{for(;x.firstChild;)x.removeChild(x.firstChild);x.appendChild(document.createTextNode(w))}}},832:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.hiderMaterialComponent=x.videoMaterialComponent=x.basicMaterialComponent=x.pbrMaterialComponent=x.resourceComponent=void 0,x.resourceComponent={schema:{src:{type:"string"}}};const n=(w,x)=>{if(!x)return x;const b=w.querySelector(x);return b&&b.getAttribute("src")||x},b={schema:{tex:{type:"string"},metalness:{type:"string"},normals:{type:"string"},roughness:{type:"string"},alpha:{type:"string"},opacity:{default:1}},init(){this.el.object3D.visible=!1,this.el.material=XRExtras.ThreeExtras.pbrMaterial({tex:n(this.el.sceneEl,this.data.tex),metalness:n(this.el.sceneEl,this.data.metalness),normals:n(this.el.sceneEl,this.data.normals),roughness:n(this.el.sceneEl,this.data.roughness),alpha:n(this.el.sceneEl,this.data.alpha),opacity:this.data.opacity})}};x.pbrMaterialComponent=b;const y={schema:{tex:{type:"string"},alpha:{type:"string"},opacity:{default:1}},init(){this.el.object3D.visible=!1,this.el.material=XRExtras.ThreeExtras.basicMaterial({tex:n(this.el.sceneEl,this.data.tex),alpha:n(this.el.sceneEl,this.data.alpha),opacity:this.data.opacity})}};x.basicMaterialComponent=y;const E={schema:{video:{type:"string"},alpha:{type:"string"},autoplay:{type:"bool",default:!0},opacity:{default:1}},init(){const w=document.querySelector(this.data.video);this.el.object3D.visible=!1,this.el.material=XRExtras.ThreeExtras.videoMaterial({video:w,alpha:n(this.el.sceneEl,this.data.alpha),opacity:this.data.opacity}),this.data.autoplay&&w.play()}};x.videoMaterialComponent=E;const C={init(){const w=new window.THREE.MeshStandardMaterial;w.colorWrite=!1;const t=x=>{x&&(x.material&&(x.material=w),x.traverse((x=>{x.isMesh&&(x.material=w)})))};t(this.el.getObject3D("mesh")),this.el.addEventListener("model-loaded",(()=>t(this.el.getObject3D("mesh"))))}};x.hiderMaterialComponent=C},472:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.logToScreenComponent=x.statsComponent=x.runtimeErrorComponent=void 0;const b={init(){const e=()=>{XR8.addCameraPipelineModule(XRExtras.RuntimeError.pipelineModule())};window.XRExtras&&window.XR8?e():window.addEventListener("xrandextrasloaded",e,{once:!0})},remove(){XRExtras.RuntimeError.hideRuntimeError(),XR8.removeCameraPipelineModule("error")}};x.runtimeErrorComponent=b;const y={schema:{version:{default:!0}},init(){if(!0===this.data.version){const e=()=>{this.el.sceneEl.removeEventListener("realityready",e);const w=XR8.version();this.versionDisplay=document.createElement("h2"),Object.assign(this.versionDisplay.style,{position:"absolute",top:0,right:0,margin:"0 auto",color:"#1BF6F6",background:"#100C2F",zIndex:99,fontFamily:"monospace"}),this.versionDisplay.textContent=w,document.body.appendChild(this.versionDisplay)};this.el.sceneEl.addEventListener("realityready",e)}this.loadModule=()=>{XR8.addCameraPipelineModule(XRExtras.Stats.pipelineModule())},window.XRExtras&&window.XR8?this.loadModule():(this.xrEventListenerAdded=!0,window.addEventListener("xrandextrasloaded",this.loadModule,{once:!0}))},remove(){this.xrEventListenerAdded&&window.removeEventListener("xrandextrasloaded",this.loadModule),this.versionDisplay&&this.versionDisplay.parentNode.removeChild(this.versionDisplay),XR8.removeCameraPipelineModule("stats")}};x.statsComponent=y;const E={init(){XRExtras.DebugWebViews.enableLogToScreen()}};x.logToScreenComponent=E},7:(w,x,b)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.faceAnchorComponent=x.faceMeshComponent=x.faceAttachmentComponent=void 0;const y=b(438),E=new Set(["leftHelix","leftCanal","leftLobe","rightHelix","rightCanal","rightLobe"]),C=new Set(["forehead","rightEyebrowInner","rightEyebrowMiddle","rightEyebrowOuter","leftEyebrowInner","leftEyebrowMiddle","leftEyebrowOuter","leftEar","rightEar","leftCheek","rightCheek","noseBridge","noseTip","leftEye","rightEye","leftEyeOuterCorner","rightEyeOuterCorner","upperLip","lowerLip","mouth","mouthRightCorner","mouthLeftCorner","chin","leftIris","rightIris","leftUpperEyelid","rightUpperEyelid","leftLowerEyelid","rightLowerEyelid"]),D={schema:{point:{type:"string",default:"forehead"}},init(){const w=parseInt(this.el.parentEl.getAttribute("face-id"),10)||0,x=(0,y.memo)((()=>{var w;if(null===(w=this.el.sceneEl.components.xrface)||void 0===w?void 0:w.data.enableEars){if(!C.has(this.data.point)&&!E.has(this.data.point))return console.error(`${this.data.point} is not a valid face/ear point.`),!1}else if(!C.has(this.data.point))return console.error(`${this.data.point} is not a valid face point.`),!1;return!0})),n=({detail:b})=>{var y;if(!x())return;if(w&&b.id!==w)return;const E=null===(y=b.attachmentPoints[this.data.point])||void 0===y?void 0:y.position;E&&(this.el.object3D.position.copy(E),this.el.object3D.visible=!0)};this.el.sceneEl.addEventListener("xrfacefound",n),this.el.sceneEl.addEventListener("xrfaceupdated",n),this.el.sceneEl.addEventListener("xrfacelost",(({detail:x})=>{w&&x.id!==w||(this.el.object3D.visible=!1)}))}};x.faceAttachmentComponent=D;const P={schema:{"material-resource":{type:"string"}},init(){this.headMesh=null;const e=w=>{this.headMesh.show(w),this.el.object3D.visible=!0};this.el.sceneEl.addEventListener("xrfaceloading",(({detail:w})=>{let x;x=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0}),this.headMesh=XRExtras.ThreeExtras.faceMesh(w,x),this.el.setObject3D("mesh",this.headMesh.mesh),this.el.emit("model-loaded")})),this.el.sceneEl.addEventListener("xrfacefound",e),this.el.sceneEl.addEventListener("xrfaceupdated",e),this.el.sceneEl.addEventListener("xrfacelost",(()=>{this.headMesh.hide(),this.el.object3D.visible=!1}))},update(){if(!this.headMesh)return;let w;w=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0}),this.headMesh.mesh.material=w}};x.faceMeshComponent=P;const X={schema:{faceId:{type:"int"}},init(){this.el.object3D.visible=!1;const e=({detail:w})=>{if(this.data.faceId&&w.id!==this.data.faceId)return;const{position:x,rotation:b,scale:y}=w.transform;this.el.object3D.position.copy(x),this.el.object3D.quaternion.copy(b),this.el.object3D.scale.set(y,y,y),this.el.object3D.visible=!0};this.el.sceneEl.addEventListener("xrfacefound",e),this.el.sceneEl.addEventListener("xrfaceupdated",e),this.el.sceneEl.addEventListener("xrfacelost",(({detail:w})=>{this.data.faceId&&w.id!==this.data.faceId||(this.el.object3D.visible=!1)}))}};x.faceAnchorComponent=X},652:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.playVideoComponent=x.holdDragComponent=x.pinchScaleComponent=x.twoFingerRotateComponent=x.oneFingerRotateComponent=x.gestureDetectorComponent=x.tapRecenterComponent=void 0;const b={init(){const w=this.el.sceneEl;w.addEventListener("click",(()=>{w.emit("recenter",{})}))}};x.tapRecenterComponent=b;const y={schema:{element:{default:""}},init(){this.targetElement=this.data.element&&document.querySelector(this.data.element),this.targetElement||(this.targetElement=this.el),this.internalState={previousState:null},this.emitGestureEvent=this.emitGestureEvent.bind(this),this.targetElement.addEventListener("touchstart",this.emitGestureEvent),this.targetElement.addEventListener("touchend",this.emitGestureEvent),this.targetElement.addEventListener("touchmove",this.emitGestureEvent)},remove(){this.targetElement.removeEventListener("touchstart",this.emitGestureEvent),this.targetElement.removeEventListener("touchend",this.emitGestureEvent),this.targetElement.removeEventListener("touchmove",this.emitGestureEvent)},emitGestureEvent(w){const x=this.getTouchState(w),{previousState:b}=this.internalState,y=b&&x&&x.touchCount==b.touchCount,E=x&&!y;if(b&&!y){const w=`${this.getEventPrefix(b.touchCount)}fingerend`;this.el.emit(w,b),this.internalState.previousState=null}if(E){x.startTime=performance.now(),x.startPosition=x.position,x.startSpread=x.spread;const w=`${this.getEventPrefix(x.touchCount)}fingerstart`;this.el.emit(w,x),this.internalState.previousState=x}if(y){const w={positionChange:{x:x.position.x-b.position.x,y:x.position.y-b.position.y}};x.spread&&(w.spreadChange=x.spread-b.spread),Object.assign(b,x),Object.assign(w,b);const y=`${this.getEventPrefix(x.touchCount)}fingermove`;this.el.emit(y,w)}},getTouchState(w){if(0==w.touches.length)return null;const x=[];for(let b=0;b<w.touches.length;b++)x.push(w.touches[b]);const b={touchCount:x.length},y=x.reduce(((w,x)=>w+x.clientX),0)/x.length,E=x.reduce(((w,x)=>w+x.clientY),0)/x.length;b.positionRaw={x:y,y:E};const C=2/(window.innerWidth+window.innerHeight);if(b.position={x:y*C,y:E*C},x.length>=2){const w=x.reduce(((w,x)=>w+Math.sqrt(Math.pow(y-x.clientX,2)+Math.pow(E-x.clientY,2))),0)/x.length;b.spread=w*C}return b},getEventPrefix:w=>["one","two","three","many"][Math.min(w,4)-1]};x.gestureDetectorComponent=y;const E={schema:{factor:{default:6}},init(){this.handleEvent=this.handleEvent.bind(this),this.el.sceneEl.addEventListener("onefingermove",this.handleEvent),this.el.classList.add("cantap")},remove(){this.el.sceneEl.removeEventListener("onefingermove",this.handleEvent)},handleEvent(w){this.el.object3D.rotation.y+=w.detail.positionChange.x*this.data.factor}};x.oneFingerRotateComponent=E;const C={schema:{factor:{default:5}},init(){this.handleEvent=this.handleEvent.bind(this),this.el.sceneEl.addEventListener("twofingermove",this.handleEvent),this.el.classList.add("cantap")},remove(){this.el.sceneEl.removeEventListener("twofingermove",this.handleEvent)},handleEvent(w){this.el.object3D.rotation.y+=w.detail.positionChange.x*this.data.factor}};x.twoFingerRotateComponent=C;const D={schema:{min:{default:.33},max:{default:3},scale:{default:0}},init(){const w=this.data.scale;this.initialScale=w&&{x:w,y:w,z:w}||this.el.object3D.scale.clone(),this.scaleFactor=1,this.handleEvent=this.handleEvent.bind(this),this.el.sceneEl.addEventListener("twofingermove",this.handleEvent),this.el.classList.add("cantap")},remove(){this.el.sceneEl.removeEventListener("twofingermove",this.handleEvent)},handleEvent(w){this.scaleFactor*=1+w.detail.spreadChange/w.detail.startSpread,this.scaleFactor=Math.min(Math.max(this.scaleFactor,this.data.min),this.data.max),this.el.object3D.scale.x=this.scaleFactor*this.initialScale.x,this.el.object3D.scale.y=this.scaleFactor*this.initialScale.y,this.el.object3D.scale.z=this.scaleFactor*this.initialScale.z}};x.pinchScaleComponent=D;const P={schema:{cameraId:{default:"camera"},groundId:{default:"ground"},dragDelay:{default:300},riseHeight:{default:1}},init(){if(this.camera=document.getElementById(this.data.cameraId),!this.camera)throw new Error(`[xrextras-hold-drag] Couldn't find camera with id '${this.data.cameraId}'`);if(this.threeCamera=this.camera.getObject3D("camera"),this.ground=document.getElementById(this.data.groundId),!this.ground)throw new Error(`[xrextras-hold-drag] Couldn't find ground with id '${this.data.groundId}'`);this.internalState={fingerDown:!1,dragging:!1,distance:0,startDragTimeout:null,raycaster:new THREE.Raycaster},this.fingerDown=this.fingerDown.bind(this),this.startDrag=this.startDrag.bind(this),this.fingerMove=this.fingerMove.bind(this),this.fingerUp=this.fingerUp.bind(this),this.el.addEventListener("mousedown",this.fingerDown),this.el.sceneEl.addEventListener("onefingermove",this.fingerMove),this.el.sceneEl.addEventListener("onefingerend",this.fingerUp),this.el.classList.add("cantap")},tick(){if(this.internalState.dragging){let w=null;if(this.internalState.positionRaw){const x=this.internalState.positionRaw.x/document.body.clientWidth*2-1,b=this.internalState.positionRaw.y/document.body.clientHeight*2-1,y=new THREE.Vector2(x,-b);this.threeCamera=this.threeCamera||this.camera.getObject3D("camera"),this.internalState.raycaster.setFromCamera(y,this.threeCamera);const E=this.internalState.raycaster.intersectObject(this.ground.object3D,!0);if(E.length>0){const x=E[0];this.internalState.distance=x.distance,w=x.point}}w||(w=this.camera.object3D.localToWorld(new THREE.Vector3(0,0,-this.internalState.distance))),w.y=this.data.riseHeight,this.el.object3D.position.lerp(w,.2)}},remove(){this.el.removeEventListener("mousedown",this.fingerDown),this.el.sceneEl.removeEventListener("onefingermove",this.fingerMove),this.el.sceneEl.removeEventListener("onefingerend",this.fingerUp),this.internalState.fingerDown&&this.fingerUp()},fingerDown(w){this.internalState.fingerDown=!0,this.internalState.startDragTimeout=setTimeout(this.startDrag,this.data.dragDelay),this.internalState.positionRaw=w.detail.positionRaw},startDrag(w){this.internalState.fingerDown&&(this.internalState.dragging=!0,this.internalState.distance=this.el.object3D.position.distanceTo(this.camera.object3D.position))},fingerMove(w){this.internalState.positionRaw=w.detail.positionRaw},fingerUp(w){if(this.internalState.fingerDown=!1,clearTimeout(this.internalState.startDragTimeout),this.internalState.positionRaw=null,this.internalState.dragging){const w=this.el.object3D.position.clone();this.el.setAttribute("animation__drop",{property:"position",to:`${w.x} 0 ${w.z}`,dur:300,easing:"easeOutQuad"})}this.internalState.dragging=!1}};x.holdDragComponent=P;const X={schema:{video:{type:"string"},thumb:{type:"string"},canstop:{type:"bool"}},init(){const w=document.querySelector(this.data.video),x=this.data.thumb&&document.querySelector(this.data.thumb),{el:b}=this;b.setAttribute("material","src",x||w),b.setAttribute("class","cantap");let y=!1;b.addEventListener("click",(()=>{y?this.data.canstop&&(b.setAttribute("material","src",x||w),w.pause(),y=!1):(b.setAttribute("material","src",w),w.play(),y=!0)}))}};x.playVideoComponent=X},457:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.handOccluderComponent=x.handMeshComponent=x.handAttachmentComponent=x.handAnchorComponent=void 0;const b={init(){let w=null;const t=({detail:x})=>{if(w&&x.id!==w)return;w=x.id;const{position:b,rotation:y,scale:E}=x.transform;this.el.object3D.position.copy(b),this.el.object3D.quaternion.copy(y),this.el.object3D.scale.set(E,E,E),this.el.object3D.visible=!0};this.el.sceneEl.addEventListener("xrhandfound",t),this.el.sceneEl.addEventListener("xrhandupdated",t),this.el.sceneEl.addEventListener("xrhandlost",(()=>{this.el.object3D.visible=!1,w=null}))}};x.handAnchorComponent=b;const y={schema:{point:{type:"string",default:"palm"},pointType:{type:"string",default:"center"}},init(){let w,x=null;const n=({detail:b})=>{if(x&&b.id!==x)return;x=b.id;const y=b.attachmentPoints[this.data.point];if(!y)return void console.error(`Invalid attachmentPoint ${this.data.point}`);const{rotation:E}=y,{pointType:C}=this.data;if("center"===C)w=y.position;else if("inner"===C)w=y.innerPoint;else{if("outer"!==C)return void console.error("Please input a valid pointType, options are: center, inner, outer");w=y.outerPoint}this.el.object3D.position.copy(w),this.el.object3D.quaternion.copy(E),this.el.object3D.visible=!0};this.el.sceneEl.addEventListener("xrhandfound",n),this.el.sceneEl.addEventListener("xrhandupdated",n),this.el.sceneEl.addEventListener("xrhandlost",(()=>{this.el.object3D.visible=!1,x=null}))}};x.handAttachmentComponent=y;const E={schema:{"material-resource":{type:"string"},wireframe:{type:"boolean",default:!1},"uv-orientation":{type:"string",default:"right"}},init(){this.handMesh=null;const e=w=>{this.handMesh.show(w),this.el.object3D.visible=!0};this.el.sceneEl.addEventListener("xrhandloading",(({detail:w})=>{let x;x=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0}),this.handMesh=((w,x,b,y)=>{let E=2;const C=new THREE.BufferGeometry,D=new Float32Array(3*w.pointsPerDetection);C.setAttribute("position",new THREE.BufferAttribute(D,3));const P=new Float32Array(3*w.pointsPerDetection);C.setAttribute("normal",new THREE.BufferAttribute(P,3));const X=new Array(3*w.rightIndices.length);for(let x=0;x<w.rightIndices.length;++x)X[3*x]=w.rightIndices[x].a,X[3*x+1]=w.rightIndices[x].b,X[3*x+2]=w.rightIndices[x].c;const N=new Array(3*w.leftIndices.length);for(let x=0;x<w.leftIndices.length;++x)N[3*x]=w.leftIndices[x].a,N[3*x+1]=w.leftIndices[x].b,N[3*x+2]=w.leftIndices[x].c;let q;if("left"===y){const x=new Float32Array(2*w.leftUvs.length);for(let b=0;b<w.pointsPerDetection;b++)x[2*b]=w.leftUvs[b].u,x[2*b+1]=w.leftUvs[b].v;q=new THREE.BufferAttribute(x,2),C.setIndex(N)}else if("right"===y){const x=new Float32Array(2*w.rightUvs.length);for(let b=0;b<w.pointsPerDetection;b++)x[2*b]=w.rightUvs[b].u,x[2*b+1]=w.rightUvs[b].v;q=new THREE.BufferAttribute(x,2),C.setIndex(X)}C.setAttribute("uv",q),b&&(x.wireframe=!0);const U=new THREE.Mesh(C,x);return{mesh:U,show:({detail:w})=>{E!==w.handKind&&(E=w.handKind,1===E?U.geometry.setIndex(N):U.geometry.setIndex(X));for(let x=0;x<w.vertices.length;++x)D[x]=w.vertices[x];U.geometry.attributes.position.needsUpdate=!0;for(let x=0;x<w.normals.length;++x)P[x]=w.normals[x];U.geometry.attributes.normal.needsUpdate=!0,U.frustumCulled=!1,U.visible=!0},hide:()=>{U.visible=!1}}})(w,x,this.data.wireframe,this.data["uv-orientation"]),this.el.setObject3D("mesh",this.handMesh.mesh),this.el.emit("model-loaded")})),this.el.sceneEl.addEventListener("xrhandfound",e),this.el.sceneEl.addEventListener("xrhandupdated",e),this.el.sceneEl.addEventListener("xrhandlost",(()=>{this.handMesh.hide(),this.el.object3D.visible=!1}))},update(){if(!this.handMesh)return;let w;w=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0}),this.handMesh.mesh.material=w}};x.handMeshComponent=E;const C={schema:{show:{type:"boolean",default:!1},adjustment:{type:"number",default:.002}},init(){this.handOccluder=null;const e=w=>{this.data.show?this.handOccluder.mesh.material.colorWrite=!0:this.handOccluder.mesh.material.colorWrite=!1,this.handOccluder.show(w),this.el.object3D.visible=!0};this.el.sceneEl.addEventListener("xrhandloading",(({detail:w})=>{const x=new THREE.MeshStandardMaterial({color:"#F5F5F5",transparent:!1,colorWrite:!1});this.handOccluder=((w,x,b)=>{let y=2;const E=new THREE.BufferGeometry,C=new Float32Array(3*w.pointsPerDetection);E.setAttribute("position",new THREE.BufferAttribute(C,3));const D=new Float32Array(3*w.pointsPerDetection);E.setAttribute("normal",new THREE.BufferAttribute(D,3));const P=new Array(3*w.rightIndices.length);for(let x=0;x<w.rightIndices.length;++x)P[3*x]=w.rightIndices[x].a,P[3*x+1]=w.rightIndices[x].b,P[3*x+2]=w.rightIndices[x].c;const X=new Array(3*w.leftIndices.length);for(let x=0;x<w.leftIndices.length;++x)X[3*x]=w.leftIndices[x].a,X[3*x+1]=w.leftIndices[x].b,X[3*x+2]=w.leftIndices[x].c;E.setIndex(P);const N=new THREE.Mesh(E,x);return{mesh:N,show:({detail:w})=>{w.handKind!==y&&(y=w.handKind,1===y?N.geometry.setIndex(X):N.geometry.setIndex(P));for(let x=0;x<w.vertices.length;++x){const y=b;C[x]=w.vertices[x]+w.normals[x]*y}N.geometry.attributes.position.needsUpdate=!0;for(let x=0;x<w.normals.length;++x)D[x]=w.normals[x];N.geometry.attributes.normal.needsUpdate=!0,N.frustumCulled=!1,N.visible=!0},hide:()=>{N.visible=!1}}})(w,x,this.data.adjustment),this.el.setObject3D("mesh",this.handOccluder.mesh),this.el.emit("model-loaded")})),this.el.sceneEl.addEventListener("xrhandfound",e),this.el.sceneEl.addEventListener("xrhandupdated",e),this.el.sceneEl.addEventListener("xrhandlost",(()=>{this.handOccluder.hide(),this.el.object3D.visible=!1}))}};x.handOccluderComponent=C},733:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.loadingComponent=x.almostThereComponent=x.hideCameraFeedComponent=x.pauseOnHiddenComponent=x.pauseOnBlurComponent=x.pwaInstallerComponent=x.attachComponent=x.opaqueBackgroundComponent=void 0;const b={schema:{remove:{default:!1}},init(){const w=this.el.object3D,{remove:x}=this.data,n=({rendersOpaque:b})=>{w.visible=!!b!=!!x};XRExtras.Lifecycle.attachListener.add(n),this.onAttach=n},remove(){XRExtras.Lifecycle.attachListener.delete(this.onAttach)}};x.opaqueBackgroundComponent=b;const y={schema:{target:{default:""},offset:{default:"0 0 0"}},update(){const w=document.getElementById(this.data.target);w&&(this.target=w.object3D,this.offset=this.data.offset.split(" ").map((w=>Number(w))))},tick(){if(!this.target)return;const[w,x,b]=this.offset;this.el.object3D.position.set(this.target.position.x+w,this.target.position.y+x,this.target.position.z+b)}};x.attachComponent=y;const E={schema:{name:{default:""},iconSrc:{default:""},installTitle:{default:""},installSubtitle:{default:""},installButtonText:{default:""},iosInstallText:{default:""},delayAfterDismissalMillis:{default:-1,type:"int"},minNumVisits:{default:-1,type:"int"}},init(){const e=()=>{const{name:w,iconSrc:x,installTitle:b,installSubtitle:y,installButtonText:E,iosInstallText:C,delayAfterDismissalMillis:D,minNumVisits:P}=this.data,X={promptConfig:{},displayConfig:{}};w&&(X.displayConfig.name=w),x&&(X.displayConfig.iconSrc=x),b&&(X.displayConfig.installTitle=b),y&&(X.displayConfig.installSubtitle=y),E&&(X.displayConfig.installButtonText=E),C&&(X.displayConfig.iosInstallText=C),D>=0&&(X.promptConfig.delayAfterDismissalMillis=D),P>=0&&(X.promptConfig.minNumVisits=P),(Object.keys(X.promptConfig).length||Object.keys(X.displayConfig).length)&&XRExtras.PwaInstaller.configure(X),XR8.addCameraPipelineModule(XRExtras.PwaInstaller.pipelineModule())};window.XRExtras&&window.XR8?e():window.addEventListener("xrandextrasloaded",e,{once:!0})},remove(){XR8.removeCameraPipelineModule("pwa-installer")}};x.pwaInstallerComponent=E;const C={init(){const w=this.el.sceneEl,t=()=>w.pause(),n=()=>w.play();XR8.addCameraPipelineModule({name:"pauseonbluraframe",onAttach:()=>{window.addEventListener("blur",t),window.addEventListener("focus",n)},onDetach:()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",n)}})},remove(){XR8.removeCameraPipelineModule("pauseonbluraframe")}};x.pauseOnBlurComponent=C;const D={init(){const w=this.el.sceneEl,t=()=>{"visible"===document.visibilityState?w.play():w.pause()};XR8.addCameraPipelineModule({name:"pauseonhiddenaframe",onAttach:()=>{document.addEventListener("visibilitychange",t)},onDetach:()=>{document.removeEventListener("visibilitychange",t)}})},remove(){XR8.removeCameraPipelineModule("pauseonhiddenaframe")}};x.pauseOnHiddenComponent=D;const P={schema:{color:{type:"string",default:"#2D2E43"}},init(){this.el.sceneEl.emit("hidecamerafeed"),this.firstTick=!0,document.querySelector("a-sky")||(this.skyEl=document.createElement("a-sky"),this.skyEl.setAttribute("color",this.data.color),this.el.sceneEl.appendChild(this.skyEl))},tick(){this.firstTick&&(this.firstTick=!1,this.el.sceneEl.emit("hidecamerafeed"))},remove(){this.el.sceneEl.emit("showcamerafeed"),this.skyEl&&this.el.sceneEl.removeChild(this.skyEl)}};x.hideCameraFeedComponent=P;const X={schema:{url:{default:""}},init(){const e=()=>{this.data.url&&XRExtras.AlmostThere.configure({url:this.data.url}),XR8.addCameraPipelineModule(XRExtras.AlmostThere.pipelineModule())};window.XRExtras&&window.XR8?e():window.addEventListener("xrandextrasloaded",e,{once:!0})},remove(){XRExtras.AlmostThere.hideAlmostThere(),XR8.removeCameraPipelineModule("almostthere")}};x.almostThereComponent=X;const d=()=>{XR8.addCameraPipelineModule(XRExtras.Loading.pipelineModule())},N={schema:{loadBackgroundColor:{default:""},cameraBackgroundColor:{default:""},loadImage:{default:""},loadAnimation:{default:""}},init(){let w=!1;this.el.addEventListener("loaded",(()=>{w=!0}));const t=()=>w,n=()=>{XRExtras.Loading.setAppLoadedProvider(t);const w=!!(this.el.sceneEl.attributes.xrweb||this.el.sceneEl.attributes.xrface||this.el.sceneEl.attributes.xrlayers);XRExtras.Loading.showLoading({onxrloaded:d,waitForRealityTexture:w})};window.XRExtras?n():window.addEventListener("xrextrasloaded",n,{once:!0});const x=document.querySelector("#loadImage");if(x){if(""!==this.data.loadImage){const w=document.querySelector(this.data.loadImage);w&&(x.src=w.src)}""!==this.data.loadAnimation&&(x.classList.remove("spin"),"none"!==this.data.loadAnimation&&x.classList.add(this.data.loadAnimation))}const b=document.querySelector("#loadBackground");b&&(b.style.backgroundColor=this.data.loadBackgroundColor);const y=document.querySelector("#requestingCameraPermissions");y&&(y.style.backgroundColor=this.data.cameraBackgroundColor)},remove(){XR8.removeCameraPipelineModule("loading")}};x.loadingComponent=N},474:(w,x,b)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.captureConfigComponent=x.capturePreviewComponent=x.captureButtonComponent=void 0;const y=b(753),E={schema:{captureMode:{default:"standard"}},init(){(0,y.ensureXrAndExtras)().then((()=>{this.removed||(this.added=!0,XRExtras.MediaRecorder.initRecordButton(),XRExtras.MediaRecorder.setCaptureMode(this.data.captureMode))}))},update(){this.added&&XRExtras.MediaRecorder.setCaptureMode(this.data.captureMode)},remove(){this.removed=!0,this.added&&XRExtras.MediaRecorder.removeRecordButton()}};x.captureButtonComponent=E;const C={schema:{actionButtonShareText:{default:""},actionButtonViewText:{default:""},finalizeText:{default:""}},init(){(0,y.ensureXrAndExtras)().then((()=>{this.removed||(this.added=!0,XRExtras.MediaRecorder.initMediaPreview(this.data))}))},remove(){this.removed=!0,this.added&&XRExtras.MediaRecorder.removeMediaPreview()}};x.capturePreviewComponent=C;const D={schema:{enableEndCard:{type:"boolean"},shortLink:{type:"string"},coverImageUrl:{type:"string"},footerImageUrl:{type:"string"},maxDurationMs:{type:"int"},endCardCallToAction:{type:"string"},maxDimension:{type:"int"},watermarkImageUrl:{type:"string"},watermarkMaxWidth:{type:"number"},watermarkMaxHeight:{type:"number"},watermarkLocation:{type:"string"},fileNamePrefix:{type:"string"},requestMic:{type:"string"},includeSceneAudio:{type:"boolean",default:!0},excludeSceneAudio:{type:"boolean",default:!1}},init(){this.includeSceneAudio=this.includeSceneAudio.bind(this)},update(){const w={audioContext:THREE.AudioContext.getContext()};void 0!==this.attrValue.excludeSceneAudio?(console.warn('"exclude-scene-audio" has been deprecated in favor of "include-scene-audio"'),w.configureAudioOutput=this.data.excludeSceneAudio?null:this.includeSceneAudio):w.configureAudioOutput=this.data.includeSceneAudio?this.includeSceneAudio:null,Object.keys(this.data).forEach((x=>{void 0===this.attrValue[x]||["includeSceneAudio","excludeSceneAudio"].includes(x)||(w[x]=this.data[x])})),XRExtras.MediaRecorder.configure(w)},includeSceneAudio({microphoneInput:w,audioProcessor:x}){const b=x.context;return this.el.sceneEl.audioListener||(this.el.sceneEl.audioListener=new THREE.AudioListener),this.el.sceneEl.audioListener.gain.connect(x),this.el.sceneEl.audioListener.gain.connect(b.destination),w}};x.captureConfigComponent=D},264:(w,x,b)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.sessionReconfigureComponent=void 0;const y=b(932),E={skipCameraSession:!1},C={schema:(()=>{const w={};return Object.keys(E).forEach((x=>{w[x]={default:E[x]}})),w})(),init(){const w=(0,y.SessionReconfigureFactory)(),x=w.pipelineModule();this.moduleName=x.name,w.configure({...this.data}),XR8.addCameraPipelineModule(x)},remove(){XR8.removeCameraPipelineModule(this.moduleName)}};x.sessionReconfigureComponent=C},581:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.spinComponent=x.namedImageTargetComponent=x.generateImageTargetsComponent=x.targetVideoSoundComponent=x.targetVideoFadeComponent=x.curvedTargetContainerComponent=x.targetMeshComponent=void 0;const b={schema:{"material-resource":{type:"string"},geometry:{type:"string"},height:{type:"number"},width:{type:"number"}},init(){this.curvedMesh=null;const w=["full","label"].includes(this.data.geometry)?this.data.geometry:"label";this.el.parentNode.addEventListener("xrextrasimagegeometry",(({detail:x})=>{let b;b=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0});const y=this.data.height,E=this.data.width,C=XRExtras.ThreeExtras.createTargetGeometry(x,"full"===w,y,E);this.curvedMesh=new THREE.Mesh(C,b),this.el.setObject3D("mesh",this.curvedMesh),this.el.emit("model-loaded")}))},update(){if(!this.curvedMesh)return;let w;w=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0}),this.curvedMesh.material=w}};x.targetMeshComponent=b;const y={schema:{color:{type:"string",default:"#464766"},height:{type:"number"},width:{type:"number"}},init(){const{object3D:w}=this.el;let x=null,b=null,y=null,E=null,C=null,D=null;const P=this.data.color,l=(w,x,b,y)=>{const E=(2*Math.PI-w.arcLengthRadians)*(y||1),C=x;return new THREE.CylinderGeometry(w.radiusTop,w.radiusBottom,b?w.height*b:w.height,50,1,C,(x?0:(2*Math.PI-E)/2)+Math.PI,x?2*Math.PI:E)},d=(w,x)=>{const b=x?w.radiusTop:w.radiusBottom;return new THREE.CircleGeometry(b,50)};this.el.parentNode.addEventListener("xrextrasimagegeometry",(({detail:w})=>{const X=this.data.height,N=this.data.width,q=document.createElement("a-entity"),U=l(w,!1,X,N),V=new THREE.MeshBasicMaterial({colorWrite:!1});x=new THREE.Mesh(U,V),x.rotation.set(0,Math.PI,0),q.setObject3D("mesh",x),this.el.appendChild(q);const W=x.geometry.parameters.height,Z=document.createElement("a-entity"),$=l(w,!0,X,N);b=new THREE.Mesh($,V),b.rotation.set(Math.PI,0,0),Z.setObject3D("mesh",b),Z.object3D.position.set(0,W,0),this.el.appendChild(Z);const G=document.createElement("a-entity"),Y=l(w,!0,X,N);y=new THREE.Mesh(Y,V),y.rotation.set(Math.PI,0,0),G.setObject3D("mesh",y),G.object3D.position.set(0,-W,0),this.el.appendChild(G);const K=new THREE.MeshStandardMaterial({color:P,side:THREE.BackSide}),Q=new THREE.MeshStandardMaterial({color:P,side:THREE.FrontSide}),J=document.createElement("a-entity"),ee=d(w,!0);E=new THREE.Mesh(ee,Q),E.rotation.set(Math.PI/2,0,0),J.setObject3D("mesh",E),J.object3D.position.set(0,W/2,0),this.el.appendChild(J);const te=document.createElement("a-entity"),ne=l(w,!0,X,N);C=new THREE.Mesh(ne,K),C.rotation.set(0,Math.PI,0),te.setObject3D("mesh",C),te.object3D.position.set(0,0,0),te.object3D.scale.set(1,1,1),this.el.appendChild(te);const re=document.createElement("a-entity"),oe=d(w,!1);D=new THREE.Mesh(oe,K),D.rotation.set(Math.PI/2,0,0),re.setObject3D("mesh",D),re.object3D.position.set(0,-W/2,0),this.el.appendChild(re)}))}};x.curvedTargetContainerComponent=y;const E={schema:{video:{type:"string"},height:{type:"number"},width:{type:"number"}},init(){const{object3D:w}=this.el,x=document.querySelector(this.data.video);let b=null;this.el.parentNode.addEventListener("xrextrasimagegeometry",(({detail:w})=>{const y=XRExtras.ThreeExtras.createTargetGeometry(w,!1,this.data.height,this.data.width);b=new THREE.Mesh(y),this.el.setObject3D("mesh",b),this.el.setAttribute("material","opacity",0),this.el.setAttribute("material","src",x)})),this.el.parentNode.addEventListener("xrextrasfound",(()=>{x.play(),this.el.setAttribute("animation",{property:"components.material.material.opacity",dur:800,isRawProperty:!0,easing:"easeInOutQuad",loop:!1,to:"1"})})),this.el.parentNode.addEventListener("xrextraslost",(()=>{x.pause(),x.currentTime=0,this.el.components.material.material.opacity=0,this.el.removeAttribute("animation")}))}};x.targetVideoFadeComponent=E;const C={schema:{video:{type:"string"},thumb:{type:"string"},height:{type:"number"},width:{type:"number"}},init(){const{object3D:w}=this.el,x=document.querySelector(this.data.video),b=this.data.thumb&&document.querySelector(this.data.thumb);let y=!1,E=null;this.el.addEventListener("click",(()=>{y||(this.el.setAttribute("material","src",x),x.play(),y=!0)})),this.el.parentNode.addEventListener("xrextrasimagegeometry",(({detail:w})=>{const y=XRExtras.ThreeExtras.createTargetGeometry(w,!1,this.data.height,this.data.width);E=new THREE.Mesh(y),this.el.setObject3D("mesh",E),this.el.setAttribute("class","cantap"),this.el.setAttribute("material","src",b||x)})),this.el.parentNode.addEventListener("xrextrasfound",(()=>{y&&x.play()})),this.el.parentNode.addEventListener("xrextraslost",(()=>{y&&x.pause()}))}};x.targetVideoSoundComponent=C;const D={schema:{primitive:{type:"string"}},init(){const w={},t=x=>{const b=w[x.detail.name];b&&b.emit(x.type,x.detail,!1)};this.el.sceneEl.addEventListener("xrimageloading",(({detail:x})=>{x.imageTargets.forEach((({name:x,type:b,metadata:y,properties:E})=>{const C=document.createElement(this.data.primitive);C.setAttribute("id",`xrextras-imagetargets-${x}`),C.setAttribute("name",x),C.setAttribute("type",b),C.setAttribute("rotated",E&&E.isRotated?"true":"false"),C.setAttribute("metadata","string"==typeof y?y:JSON.stringify(y)),document.querySelector("a-scene").appendChild(C),w[x]=C}))})),this.el.sceneEl.addEventListener("xrimagefound",t),this.el.sceneEl.addEventListener("xrimageupdated",t),this.el.sceneEl.addEventListener("xrimagelost",t)}};x.generateImageTargetsComponent=D;const P={schema:{name:{type:"string"}},init(){const{object3D:w}=this.el,{name:x}=this.data,b={},r=()=>{this.el.sceneEl.removeEventListener("realityready",r),w.visible=!1};this.el.sceneEl.addEventListener("realityready",r);const i=w=>{let x=!1;["type","height","radiusTop","radiusBottom","arcLengthRadians","arcStartRadians","scaledWidth","scaledHeight"].forEach((y=>{b[y]!==w[y]&&(b[y]=w[y],x=!0)})),x&&this.el.emit("xrextrasimagegeometry",b,!1)},o=({detail:b})=>{x===b.name&&(w.position.copy(b.position),w.quaternion.copy(b.rotation),w.scale.set(b.scale,b.scale,b.scale),w.visible=!0)};this.el.sceneEl.addEventListener("xrimagescanning",(({detail:w})=>{w.imageTargets.forEach((w=>{x===w.name&&i({type:w.type,...w.geometry})}))})),this.el.sceneEl.addEventListener("xrimagefound",(({detail:w})=>{x===w.name&&(i(w),o({detail:w}),this.el.emit("xrextrasfound",{},!1))})),this.el.sceneEl.addEventListener("xrimageupdated",o),this.el.sceneEl.addEventListener("xrimagelost",(({detail:b})=>{x===b.name&&(this.el.emit("xrextraslost",{},!1),w.visible=!1)}))}};x.namedImageTargetComponent=P;const X={schema:{speed:{default:2e3},direction:{default:"normal"}},init(){this.el.setAttribute("animation__spin",{property:"object3D.rotation.y",from:0,to:360,dur:this.data.speed,dir:this.data.direction,loop:!0,easing:"linear"})},remove(){this.el.removeAttribute("animation__spin")}};x.spinComponent=X},943:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.wristMeshComponent=void 0;const n=(w,x)=>{const b=new THREE.Object3D;b.visible=!1;const y=new THREE.BufferGeometry,E=new Float32Array(3*w.vertices.length);for(let x=0;x<w.vertices.length;++x)E[3*x]=w.vertices[x].x,E[3*x+1]=w.vertices[x].y,E[3*x+2]=w.vertices[x].z;y.setAttribute("position",new THREE.BufferAttribute(E,3));const C=new Array(3*w.indices.length);for(let x=0;x<w.indices.length;++x)C[3*x]=w.indices[x].a,C[3*x+1]=w.indices[x].b,C[3*x+2]=w.indices[x].c;y.setIndex(C);const D=new Float32Array(3*w.normals.length);for(let x=0;x<w.normals.length;x++)D[3*x]=w.normals[x].x,D[3*x+1]=w.normals[x].y,D[3*x+2]=w.normals[x].z;y.setAttribute("normal",new THREE.BufferAttribute(D,3));const P=new THREE.Mesh(y,x);return b.add(P),b},b={schema:{"material-resource":{type:"string"},wireframe:{type:"boolean",default:!1},occluder:{type:"boolean",default:!1}},init(){this.isWristEnabled=!1;const e=w=>{this.wristMesh.show(w),this.el.object3D.visible=!0};this.el.sceneEl.addEventListener("xrhandloading",(({detail:w})=>{var x;let b;this.isWristEnabled=null===(x=this.el.parentEl.sceneEl.components.xrhand)||void 0===x?void 0:x.data.enableWrists,b=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0});const y=new THREE.MeshStandardMaterial({color:"#F5F5F5",transparent:!1,colorWrite:!1});b.wireframe=this.data.wireframe,this.data.occluder&&(b=y),this.wristMesh=((w,x,b)=>{let y,E=2;const C=n(w.leftWristGeometry,x),D=n(w.rightWristGeometry,x);return y=D,{leftWrist:C,rightWrist:D,show:({detail:w})=>{E!==w.handKind&&(E=w.handKind,1===E?(y=C,D.visible=!1):(y=D,C.visible=!1));const{wristTransform:x}=w;y.position.copy(x.position),y.setRotationFromQuaternion(x.rotation),y.scale.set(x.scale,x.scale,x.scale),y.frustumCulled=!1,b&&(y.visible=!0)},hide:()=>{y.visible=!1}}})(w,b,this.isWristEnabled),this.el.setObject3D("leftWrist",this.wristMesh.leftWrist),this.el.setObject3D("rightWrist",this.wristMesh.rightWrist),this.el.emit("model-loaded")})),this.el.sceneEl.addEventListener("xrhandfound",e),this.el.sceneEl.addEventListener("xrhandupdated",e),this.el.sceneEl.addEventListener("xrhandlost",(()=>{this.wristMesh.hide(),this.el.object3D.visible=!1}))},update(){if(!this.wristMesh)return;let w;w=this.el.getAttribute("material")?this.el.components.material.material:this.data["material-resource"]?this.el.sceneEl.querySelector(this.data["material-resource"]).material:new THREE.MeshBasicMaterial({color:"#7611B6",opacity:.5,transparent:!0}),this.wristMesh.mesh.material=w}};x.wristMeshComponent=b},895:(w,x,b)=>{x.q=void 0;const y=b(832),E=b(264),C=b(472),D=b(652),P=b(7),X=b(457),N=b(943),q=b(733),U=b(474),V=b(581);x.q=()=>({"xrextras-almost-there":q.almostThereComponent,"xrextras-loading":q.loadingComponent,"xrextras-runtime-error":C.runtimeErrorComponent,"xrextras-stats":C.statsComponent,"xrextras-opaque-background":q.opaqueBackgroundComponent,"xrextras-tap-recenter":D.tapRecenterComponent,"xrextras-generate-image-targets":V.generateImageTargetsComponent,"xrextras-named-image-target":V.namedImageTargetComponent,"xrextras-gesture-detector":D.gestureDetectorComponent,"xrextras-one-finger-rotate":D.oneFingerRotateComponent,"xrextras-two-finger-rotate":D.twoFingerRotateComponent,"xrextras-pinch-scale":D.pinchScaleComponent,"xrextras-hold-drag":D.holdDragComponent,"xrextras-attach":q.attachComponent,"xrextras-play-video":D.playVideoComponent,"xrextras-log-to-screen":C.logToScreenComponent,"xrextras-pwa-installer":q.pwaInstallerComponent,"xrextras-pause-on-blur":q.pauseOnBlurComponent,"xrextras-pause-on-hidden":q.pauseOnHiddenComponent,"xrextras-faceanchor":P.faceAnchorComponent,"xrextras-resource":y.resourceComponent,"xrextras-pbr-material":y.pbrMaterialComponent,"xrextras-basic-material":y.basicMaterialComponent,"xrextras-video-material":y.videoMaterialComponent,"xrextras-face-mesh":P.faceMeshComponent,"xrextras-face-attachment":P.faceAttachmentComponent,"xrextras-hide-camera-feed":q.hideCameraFeedComponent,"xrextras-hider-material":y.hiderMaterialComponent,"xrextras-capture-button":U.captureButtonComponent,"xrextras-capture-preview":U.capturePreviewComponent,"xrextras-capture-config":U.captureConfigComponent,"xrextras-curved-target-container":V.curvedTargetContainerComponent,"xrextras-target-mesh":V.targetMeshComponent,"xrextras-target-video-fade":V.targetVideoFadeComponent,"xrextras-target-video-sound":V.targetVideoSoundComponent,"xrextras-spin":V.spinComponent,"xrextras-hand-anchor":X.handAnchorComponent,"xrextras-hand-attachment":X.handAttachmentComponent,"xrextras-hand-mesh":X.handMeshComponent,"xrextras-hand-occluder":X.handOccluderComponent,"xrextras-wrist-mesh":N.wristMeshComponent,"xrextras-session-reconfigure":E.sessionReconfigureComponent})},438:(w,x)=>{Object.defineProperty(x,"__esModule",{value:!0}),x.memo=void 0,x.memo=w=>{let x=null,b=!1;return(...y)=>(b||(x=w(...y),b=!0),x)}},260:(w,x)=>{x.w=void 0;let b=null;x.w=()=>(null==b&&(b=function(){let w=null;const x={w:0,h:0};let b=0;const y={backgroundColor:"initial",overflowY:"initial"},E={overflow:"initial"},C={width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px",display:"block"},D={width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px",overflowY:"initial",backgroundColor:"initial"},s=()=>XR8.XrDevice.isDeviceBrowserCompatible({allowedDevices:XR8.XrConfig.device().MOBILE})&&!XR8.XrDevice.deviceEstimate().model.toLowerCase().includes("ipad"),l=()=>{if(!w)return;const y=window.innerWidth,E=window.innerHeight,D=y*devicePixelRatio,P=E*devicePixelRatio;if(((0===b||180===b)&&D>P||(90===b||-90===b)&&P>D)&&s())return void window.requestAnimationFrame(l);const X=Math.max(D,P),N=Math.min(D,P),q=X/N,U=Math.max(x.w,x.h),V=Math.min(x.w,x.h);let W=U,Z=Math.round(U/q);if(Z>V&&(Z=V,W=Math.round(V*q)),(Z>N||W>X)&&(Z=N,W=X),D>P){const w=Z;Z=W,W=w}Object.assign(w.style,C),w.width=Z,w.height=W,setTimeout((()=>window.scrollTo(0,(window.scrollY+1)%2)),300)},d=({videoWidth:w,videoHeight:b})=>{x.w=w,x.h=b},c=()=>{s()||l()},m=({videoWidth:w,videoHeight:x})=>{d({videoWidth:w,videoHeight:x}),l()},h=({status:w,video:x})=>{"hasVideo"===w&&d(x)},p=()=>{l()},u=()=>{w.style.width===C.width&&w.style.height===C.height||l()},g=({canvas:x,orientation:C,videoWidth:P,videoHeight:X})=>{if(w=x,b=C,"iOS"===XR8.XrDevice.deviceEstimate().os){const w=getComputedStyle(document.body);y.backgroundColor=w.getPropertyValue("background-color"),y.overflowY=w.getPropertyValue("overflow-y"),E.overflow=getComputedStyle(document.documentElement).getPropertyValue("overflow"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D.backgroundColor="black":D.backgroundColor="white",D.overflowY="scroll",Object.assign(document.documentElement.style,{overflow:"hidden"})}Object.assign(document.body.style,D),document.body.appendChild(w),window.addEventListener("resize",c),d({videoWidth:P,videoHeight:X}),l()},f=()=>{Object.assign(document.body.style,y),Object.assign(document.documentElement.style,E),w=null,b=0,delete x.w,delete x.h,window.removeEventListener("resize",c)},v=({orientation:w})=>{b=w,l()};return{pipelineModule:()=>({name:"fullwindowcanvas",onAttach:g,onDetach:f,onCameraStatusChange:h,onDeviceOrientationChange:v,onVideoSizeChange:m,onCanvasSizeChange:p,onUpdate:u})}}()),b)},932:(w,x)=>{let b;Object.defineProperty(x,"__esModule",{value:!0}),x.SessionReconfigureFactory=void 0;let y=null;x.SessionReconfigureFactory=()=>(null==y&&(y=(()=>{let w;const t=()=>{XR8.reconfigureSession({runConfig:b})},r=()=>{XR8.reconfigureSession({...b,sessionInitBehavior:"fallback"})},i=w=>!!w.sessionAttributes.fillsCameraTexture;return{pipelineModule:()=>{let x,y;const s=w=>{y||(y=document.createElement("div"),y.style.position="fixed",y.style.left="50vw",y.style.top="50vh",y.style.transform="translate(-50%, -50%)",y.style.zIndex="9000",y.style.color="white",document.body.appendChild(y)),y.textContent+=` ${w}`},l=()=>{y&&document.body.removeChild(y),y=null};let E=!1;return{name:"session-reconfigurator",onRunConfigure:x=>{b=x.config,E=!!w},onBeforeSessionInitialize:x=>{if(w&&w(x))throw new Error("Session preventer choose to skip session")},onCameraStatusChange:({status:w})=>{"failed"===w?s("Requesting camera permission failed."):"hasStream"===w?l():"hasDesktop3D"===w&&(E||s("Using desktop 3D camera fallback."))},onAttach:()=>{if(!XR8.reconfigureSession)throw new Error("Invalid XR8 version, missing reconfigureSession");x=document.createElement("div"),Object.assign(x.style,{position:"fixed",left:0,top:0,padding:"1rem",zIndex:9e5}),[{name:"enable xr",action:r},{name:"prevent camera",action:t,sessionPreventer:i}].forEach((b=>{const y=document.createElement("button");y.textContent=b.name,x.appendChild(y),y.addEventListener("click",(()=>{w=b.sessionPreventer,b.action()}))})),document.body.appendChild(x)},onDetach:()=>{x&&(document.body.removeChild(x),x=null),l()}}},configure:({skipCameraSession:x})=>{x&&(w=i)},restartSession:t,enableAnyDirection:()=>{XR8.reconfigureSession({...b,cameraConfig:{...b.cameraConfig,direction:"any"}})},disableVoidSpace:()=>{var w;XR8.reconfigureSession({...b,sessionConfiguration:{...b.sessionConfiguration,defaultEnvironment:{...null===(w=b.sessionConfiguration)||void 0===w?void 0:w.defaultEnvironment,disabled:!0}}})},enableVoidSpace:()=>{var w;XR8.reconfigureSession({...b,sessionConfiguration:{...b.sessionConfiguration,defaultEnvironment:{...null===(w=b.sessionConfiguration)||void 0===w?void 0:w.defaultEnvironment,disabled:!1}}})},preventCamera:i,preventHeadset:w=>!!w.sessionAttributes.usesWebXr}})()),y)},753:(w,x,b)=>{b.r(x),b.d(x,{ensureXrAndExtras:()=>i});const r=w=>new Promise((x=>window.addEventListener(w,x,{once:!0}))),i=()=>{const w=[];return window.XR8||w.push("xrloaded"),window.XRExtras||w.push("xrextrasloaded"),Promise.all(w.map(r))}}},x={};function n(b){var y=x[b];if(void 0!==y)return y.exports;var E=x[b]={id:b,exports:{}};return w[b](E,E.exports,n),E.exports}n.n=w=>{var x=w&&w.__esModule?()=>w.default:()=>w;return n.d(x,{a:x}),x},n.d=(w,x)=>{for(var b in x)n.o(x,b)&&!n.o(w,b)&&Object.defineProperty(w,b,{enumerable:!0,get:x[b]})},n.o=(w,x)=>Object.prototype.hasOwnProperty.call(w,x),n.r=w=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},n.nc=void 0,(()=>{var w=n(895),x=n(753);let b=null;const i=()=>{XR8.addCameraPipelineModule(XRExtras.Loading.pipelineModule())},o=()=>{const w=document.getElementsByTagName("a-scene")[0];if(!w)return;const x=w.attributes;let b=!1,y=!1,E=null,C=null;const D=Array.from(x).map((w=>w.name)).includes("xrconfig");if(Object.keys(x).forEach((w=>{const P=x.item(w).name;if("xrextras-almost-there"===P){b=!0;const y=new RegExp("url:([^;]*)").exec(x.item(w).value);y&&(E=y[1])}if("xrextras-loading"===P&&(y=!0),"xrconfig"===P||!D&&("xrweb"===P||"xrface"===P||"xrlayers"===P)){const b=new RegExp("allowedDevices:([^;]*)").exec(x.item(w).value);b&&(C={allowedDevices:b[1].trim()})}})),b&&(E&&window.XRExtras.AlmostThere.configure({url:E}),window.XR8?window.XRExtras.AlmostThere.checkCompatibility(C):window.addEventListener("xrloaded",(()=>window.XRExtras.AlmostThere.checkCompatibility(C)))),y){const x=!!(w.attributes.xrweb||w.attributes.xrface||w.attributes.xrlayers);window.XRExtras.Loading.showLoading({onxrloaded:i,waitForRealityTexture:x})}};var y=n(379),E=n.n(y),C=n(795),D=n.n(C),P=n(569),X=n.n(P),N=n(565),q=n.n(N),U=n(216),V=n.n(U),W=n(589),Z=n.n(W),$=n(854),G={};G.styleTagTransform=Z(),G.setAttributes=q(),G.insert=X().bind(null,"head"),G.domAPI=D(),G.insertStyleElement=V(),E()($.Z,G),$.Z&&$.Z.locals&&$.Z.locals;var Y=n(689),K={};K.styleTagTransform=Z(),K.setAttributes=q(),K.insert=X().bind(null,"head"),K.domAPI=D(),K.insertStyleElement=V(),E()(Y.Z,K),Y.Z&&Y.Z.locals&&Y.Z.locals;let Q=null,J=null;var ee=n(260),te=n(202),ne={};ne.styleTagTransform=Z(),ne.setAttributes=q(),ne.insert=X().bind(null,"head"),ne.domAPI=D(),ne.insertStyleElement=V(),E()(te.Z,ne),te.Z&&te.Z.locals&&te.Z.locals;let re=null,oe=null;const T=()=>(oe||(oe=(()=>{const w=new Set;let x=!1,b=null,{XR8:y}=window;const i=()=>({name:"xrextraslifecycle",onAttach:y=>{b=y,x=!0,w.forEach((w=>w(b)))},onDetach:()=>{x=!1,b=null}});return y||window.addEventListener("xrloaded",(()=>{y=window.XR8,w.size&&y.addCameraPipelineModule(i())}),{once:!0}),{add:E=>{!w.size&&y&&y.addCameraPipelineModule(i()),w.add(E),x&&E(b)},delete:x=>{w.delete(x)&&y&&!w.size&&y.removeCameraPipelineModule("xrextraslifecycle")}}})()),oe);let ce=null,me=null,he=null;var pe=n(213),ue={};ue.styleTagTransform=Z(),ue.setAttributes=q(),ue.insert=X().bind(null,"head"),ue.domAPI=D(),ue.insertStyleElement=V(),E()(pe.Z,ue),pe.Z&&pe.Z.locals&&pe.Z.locals;let ge=null,fe=null;const O=()=>`LAST_INSTALL_DISMISS_TIME_KEY/${j()}`,F=()=>`NUM_VISITS_KEY/${j()}`,j=()=>{try{return new URL([].find.call(document.scripts,(w=>/xrweb(\?.*)?$/.test(w.src))).src).searchParams.get("appKey")}catch(w){return""}},z=(w,x=null)=>{try{return localStorage.getItem(w)||x}catch(w){return x}},H=(w,x)=>{try{localStorage.setItem(w,x)}catch(w){}};window.addEventListener("beforeinstallprompt",(w=>{w.preventDefault(),fe=w})),window.addEventListener("load",(w=>{(()=>{const w=F(),x=parseInt(z(w,"0"),10);H(w,(x+1).toString())})()}));var ve=n(493),we={};we.styleTagTransform=Z(),we.setAttributes=q(),we.insert=X().bind(null,"head"),we.domAPI=D(),we.insertStyleElement=V(),E()(ve.Z,we),ve.Z&&ve.Z.locals&&ve.Z.locals;let xe=null,be=null,ye=null;var Ee=n(583),Ce={};Ce.styleTagTransform=Z(),Ce.setAttributes=q(),Ce.insert=X().bind(null,"head"),Ce.domAPI=D(),Ce.insertStyleElement=V(),E()(Ee.Z,Ce),Ee.Z&&Ee.Z.locals&&Ee.Z.locals;const Re={enableEndCard:!0,footerImageUrl:"https://cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-4.svg"},ke={};let je,ze=!1;const ie=()=>{XR8.MediaRecorder.configure(Re)},Ve=new Set(["watermarkImageUrl","watermarkMaxWidth","watermarkMaxHeight","watermarkLocation","fileNamePrefix","onProcessFrame"]),ae=(w={})=>{Object.keys(w).forEach((x=>{const b=w[x];void 0!==b&&(Ve.has(x)?ke[x]=b:Re[x]=b)})),(()=>{const w=ke.watermarkImageUrl;if(w===je)return;if(je=w,!je)return void(ke.watermarkImage=null);const x=document.createElement("img");x.onload=()=>{ke.watermarkImage=x},x.onerror=()=>{console.error(`Failed to load image from ${x.src}`),ke.watermarkImage=null},x.setAttribute("crossorigin","anonymous"),x.setAttribute("src",je)})(),window.XR8?ie():ze||(ze=!0,window.addEventListener("xrloaded",ie,{once:!0}))},se=()=>ke,le=()=>se().fileNamePrefix||"my-capture-",de=w=>{const x=document.createElement("a");Object.assign(x,w),document.body.appendChild(x),x.click(),document.body.removeChild(x)};let We,Ze,$e,Ge,Ye,Ke=!1,Qe=null,dt=null,ct=null,mt=!1,ht=null,pt=!1,ut=null,ft=null,vt=!1,wt=null;const Me=()=>{Qe=null,dt&&URL.revokeObjectURL(dt),ut&&URL.revokeObjectURL(ut),clearTimeout(ht),We.style.removeProperty("pointer-events"),Ye.value=0,dt=null,wt=null,ut=null,mt=!1,pt=!1,ft=null,vt=!1,We.classList.remove("fade-in"),We.classList.remove("image-preview"),We.classList.remove("video-preview"),We.classList.remove("downloaded"),We.classList.remove("finalize-waiting")},Le=w=>{$e.muted=w,Ge.src=w?"//cdn.8thwall.com/web/img/mediarecorder/sound-off-v1.svg":"//cdn.8thwall.com/web/img/mediarecorder/sound-on-v1.svg"},Ae=()=>{const w=pt;Me(),Ze.removeAttribute("src"),$e.pause(),$e.removeAttribute("src"),window.dispatchEvent(new CustomEvent("mediarecorder-previewclosed")),vt=w},Te=()=>{if(pt)return We.classList.add("finalize-waiting"),void(ft="download");de({href:wt||dt,download:ct}),We.classList.add("downloaded")},Se=()=>{de({href:"shareddocuments:///private/var/mobile/Library/Mobile Documents/com~apple~CloudDocs/Downloads/"+ct,target:"_blank"})},Ie=()=>{if(pt)return We.classList.add("finalize-waiting"),void(ft="share");const w={title:"",text:"",files:[new File([Qe],ct,{type:mt?"image/jpeg":"video/mp4",lastModified:Date.now()})]};navigator.share(w)},Be=()=>{const w=new Date;return[w.getHours(),w.getMinutes(),w.getSeconds()].map((w=>w.toString().padStart(2,"0"))).join("")},_e=()=>{We.classList.add("fade-in"),window.dispatchEvent(new CustomEvent("mediarecorder-previewopened")),clearTimeout(ht),ht=setTimeout((()=>{We.style.pointerEvents="auto"}),100)},De=({videoBlob:w})=>{Me(),Qe=w,dt=URL.createObjectURL(w),ct=`${le()}${Be()}.mp4`,We.classList.add("video-preview");let x=!0,b=!0;const r=()=>{x||b||(_e(),Le(!1),$e.play().then((()=>{"iOS"===window.XR8.XrDevice.deviceEstimate().os&&($e.pause(),$e.play())})).catch((()=>{Le(!0),$e.play()})))};if("iOS"!==window.XR8.XrDevice.deviceEstimate().os||Ke)b=!1;else{const w=new FileReader;w.readAsDataURL(Qe),w.onloadend=()=>{b=!1,wt=w.result,r()}}$e.oncanplaythrough=()=>{$e.oncanplaythrough=null,x=!1,r()},$e.oncanplaythrough(),$e.src=dt,$e.load()},Pe=w=>{if(vt)return void(vt=!1);if(!pt)return void De(w.detail);We.classList.remove("finalize-waiting"),pt=!1;const{videoBlob:x}=w.detail;switch(ut=dt,Qe=x,dt=URL.createObjectURL(x),ct=`${le()}${Be()}.mp4`,ft){case"share":Ie();break;case"download":Te()}ft=null},Xe=w=>{De(w.detail),pt=!0},Oe=w=>(({blob:w})=>{Me(),Qe=w,dt=URL.createObjectURL(w),ct=`${le()}${Be()}.jpg`,mt=!0;const x=new FileReader;x.readAsDataURL(w),x.onloadend=()=>{Ze.src=x.result,We.classList.add("image-preview"),_e()}})(w.detail),Fe=w=>{Ye.value=w.detail.progress,Ye.max=w.detail.total};var xt=n(498),bt={};bt.styleTagTransform=Z(),bt.setAttributes=q(),bt.insert=X().bind(null,"head"),bt.domAPI=D(),bt.insertStyleElement=V(),E()(xt.Z,bt),xt.Z&&xt.Z.locals&&xt.Z.locals;const He=w=>{switch(w){case"topLeft":case"topMiddle":case"topRight":return 0;default:return 2}},Ne=w=>{switch(w){case"topLeft":case"bottomLeft":return 0;case"topMiddle":case"bottomMiddle":return 1;default:return 2}},qe=(w,x,b)=>{switch(w){case 0:return 0;case 1:return b/2-x/2;default:return b-x}},Ue=w=>{const x=se();if(!x.watermarkImage)return;const{watermarkImage:b,watermarkLocation:y,watermarkMaxWidth:E,watermarkMaxHeight:C}=x,D=b.naturalWidth,P=b.naturalHeight,X=w.canvas.width,N=w.canvas.height,q=X*(E||20)/100,U=N*(C||20)/100,{width:V,height:W}=((w,x,b,y)=>{const E=Math.min(b/w,y/x);return{width:w*E,height:x*E}})(D,P,q,U),{x:Z,y:$}=((w,x,b,y,E)=>({x:qe(Ne(E),w,b),y:qe(He(E),x,y)}))(V,W,X,N,y);w.drawImage(x.watermarkImage,Z,$,V,W)};let yt,Et,Ct,Rt="standard",kt="waiting",Mt=null,Lt=!1,At=!1;const Je=()=>{yt.classList.remove("fade-container"),yt.classList.remove("active"),yt.classList.remove("recording"),yt.classList.remove("loading"),yt.classList.remove("fixed-mode"),Et.classList.remove("flashing"),clearTimeout(Mt),Lt=!1,kt="waiting"},et=()=>{Je(),At=!1},tt=()=>{Je(),yt.classList.add("fade-container")},nt=()=>{At?(yt.classList.add("loading"),yt.classList.remove("fade-container"),kt="finalize-blocked"):et()},rt=()=>{const w=se();kt="flash",Et.classList.add("flashing"),window.XR8.CanvasScreenshot.takeScreenshot({onProcessFrame:({ctx:x})=>{w.onProcessFrame&&w.onProcessFrame({ctx:x}),Ue(x)}}).then((w=>{const x=atob(w),b=new ArrayBuffer(x.length),y=new Uint8Array(b);for(let w=0;w<x.length;w++)y[w]=x.charCodeAt(w);const E=new Blob([b],{type:"image/jpeg"});et(),window.dispatchEvent(new CustomEvent("mediarecorder-photocomplete",{detail:{blob:E}}))})).catch((()=>{et()}))},it=()=>{"recording"===kt&&(yt.classList.remove("fixed-mode"),yt.classList.remove("recording"),yt.classList.add("loading"),kt="loading")},ot=()=>{"recording"===kt&&(XR8.MediaRecorder.stopRecording(),it())},at=()=>{if("active"!==kt)return;const w=se();kt="recording",yt.classList.add("recording"),XR8.MediaRecorder.recordVideo({onVideoReady:w=>{At=!1,"finalize-blocked"===kt&&et(),window.dispatchEvent(new CustomEvent("mediarecorder-recordcomplete",{detail:w}))},onStart:w=>{window.dispatchEvent(new CustomEvent("mediarecorder-recordstart",{detail:w}))},onStop:w=>{window.dispatchEvent(new CustomEvent("mediarecorder-recordstop",{detail:w})),it()},onError:w=>{window.dispatchEvent(new CustomEvent("mediarecorder-recorderror",{detail:w})),et()},onProcessFrame:x=>{const{elapsedTimeMs:b,maxRecordingMs:y,ctx:E}=x,C=1-b/y;Ct.style.strokeDashoffset=""+100*C,w.onProcessFrame&&w.onProcessFrame(x),Ue(E)},onPreviewReady:w=>{At=!0,window.dispatchEvent(new CustomEvent("mediarecorder-previewready",{detail:w}))},onFinalizeProgress:w=>window.dispatchEvent(new CustomEvent("mediarecorder-finalizeprogress",{detail:w}))})},st=w=>{w.preventDefault(),Lt||(Lt=!0,"fixed"===Rt?"waiting"===kt?(kt="active",yt.classList.add("fixed-mode"),yt.classList.add("active"),at()):"recording"===kt&&ot():"photo"===Rt?(yt.classList.add("active"),rt()):"waiting"===kt&&"waiting"===kt&&(kt="active",yt.classList.add("active"),Mt=setTimeout(at,300)))},lt=()=>{Lt&&(Lt=!1,"standard"===Rt&&("active"===kt&&"active"===kt&&(clearTimeout(Mt),rt()),"recording"===kt&&ot()))};let Tt=null;const St=(null===Tt&&(Tt={initMediaPreview:(w={})=>{document.body.insertAdjacentHTML("beforeend",'<div id="previewContainer"> <div class="top-bar"> <div class="preview-box"> <button id="closePreviewButton" class="style-reset icon-button"> <img src="//cdn.8thwall.com/web/img/mediarecorder/close-v2.svg"> </button> <img id="imagePreview"> <video id="videoPreview" playsinline loop></video> <button id="toggleMuteButton" class="style-reset icon-button"> <img id="muteButtonImg" src="//cdn.8thwall.com/web/img/mediarecorder/sound-on-v1.svg"> </button> </div> </div> <div class="bottom-bar"> <div class="finalize-container"> <div id="finalizeText"></div> <progress id="finalizeProgressBar" value="0" max="100"></progress> </div> <button id="downloadButton" class="style-reset icon-button"> <img src="//cdn.8thwall.com/web/img/mediarecorder/download-v1.svg"> </button> <div id="openSafariText" class="style-reset">Downloading is only available in Safari</div> <div id="tapAndHoldText" class="style-reset">Tap + Hold to Share</div> <button id="actionButton" class="style-reset show-with-download-button"> <span id="actionButtonText"></span> <img id="actionButtonImg"> </button> </div> </div> '),We=document.getElementById("previewContainer"),Ze=document.getElementById("imagePreview"),$e=document.getElementById("videoPreview"),Ge=document.getElementById("muteButtonImg"),Ye=document.getElementById("finalizeProgressBar");const x=document.getElementById("downloadButton"),b=document.getElementById("actionButton"),y=document.getElementById("actionButtonText"),E=document.getElementById("actionButtonImg"),C=window.XR8.XrDevice.deviceEstimate().browser.inAppBrowser||window.XR8.XrDevice.deviceEstimate().browser.name,D=["Microsoft Edge","Google Chrome","Mozilla Firefox Focus","Firefox","Opera Touch","Pinterest","Snapchat","Instagram","Facebook","Facebook Messenger","Line","LinkedIn","Naver","Baidu","Brave"].includes(C),P={files:[new File([new Blob],"tmp.mp4",{type:"video/mp4",lastModified:Date.now()})]};navigator.canShare&&navigator.canShare(P)?(Ke=!0,y.textContent=w.actionButtonShareText||"Share",E.src="//cdn.8thwall.com/web/img/mediarecorder/share-v1.svg",b.addEventListener("click",Ie),"iOS"===window.XR8.XrDevice.deviceEstimate().os&&(b.classList.remove("show-with-download-button"),b.classList.add("show-alone"),x.parentNode.removeChild(x))):"iOS"===window.XR8.XrDevice.deviceEstimate().os&&D?(We.classList.add("disabled-download"),b.parentNode.removeChild(b),x.parentNode.removeChild(x)):"iOS"===window.XR8.XrDevice.deviceEstimate().os?(y.textContent=w.actionButtonViewText||"View",E.src="//cdn.8thwall.com/web/img/mediarecorder/view-v1.svg",b.addEventListener("click",Se),b.classList.add("show-after-download")):b.parentNode.removeChild(b),document.getElementById("finalizeText").textContent=w.finalizeText||"Preparing...",document.getElementById("toggleMuteButton").addEventListener("click",(()=>{Le(!$e.muted)})),window.addEventListener("mediarecorder-recordcomplete",Pe),window.addEventListener("mediarecorder-photocomplete",Oe),window.addEventListener("mediarecorder-previewready",Xe),window.addEventListener("mediarecorder-finalizeprogress",Fe),document.getElementById("closePreviewButton").addEventListener("click",Ae),document.getElementById("downloadButton")&&x.addEventListener("click",Te),ae()},removeMediaPreview:()=>{We.parentNode.removeChild(We),Me(),ct=null,We=null,Ze=null,$e=null,Ge=null,Ye=null,window.removeEventListener("mediarecorder-recordcomplete",Pe),window.removeEventListener("mediarecorder-photocomplete",Oe),window.removeEventListener("mediarecorder-previewready",Xe),window.removeEventListener("mediarecorder-finalizeprogress",Fe)},initRecordButton:()=>{window.XR8.addCameraPipelineModule(XR8.MediaRecorder.pipelineModule()),document.body.insertAdjacentHTML("beforeend",'<div id="recorder" class="recorder-container"> <svg viewBox="0 0 38 38" class="progress-container"> <circle class="progress-track" r="16" cx="19" cy="19"></circle> <circle id="progressBar" class="progress-bar" r="16" cx="19" cy="19"></circle> <circle class="loading-circle" r="16" cx="19" cy="19"></circle> </svg> <button id="recorder-button" class="style-reset"> Record </button> </div> <div id="flashElement" class="flash-element"></div> '),yt=document.querySelector("#recorder"),Et=document.querySelector("#flashElement"),Ct=document.querySelector("#progressBar");const w=document.querySelector("#recorder-button");w.addEventListener("touchstart",st),w.addEventListener("mousedown",st),window.addEventListener("mouseup",lt),window.addEventListener("touchend",lt),window.addEventListener("mediarecorder-previewclosed",nt),window.addEventListener("mediarecorder-previewopened",tt),ae()},removeRecordButton:()=>{window.XR8.removeCameraPipelineModule(window.XR8.MediaRecorder.pipelineModule().name),yt.parentNode.removeChild(yt),Et.parentNode.removeChild(Et),window.removeEventListener("mouseup",lt),window.removeEventListener("touchend",lt),window.removeEventListener("mediarecorder-previewclosed",nt),window.removeEventListener("mediarecorder-previewopened",tt),et(),yt=null,Et=null,Ct=null},configure:ae,setCaptureMode:w=>{switch(w){case"photo":case"fixed":Rt=w;break;default:Rt="standard"}}}),Tt);var It=n(932),Bt=n(136),_t={};_t.styleTagTransform=Z(),_t.setAttributes=q(),_t.insert=X().bind(null,"head"),_t.domAPI=D(),_t.insertStyleElement=V(),E()(Bt.Z,_t),Bt.Z&&Bt.Z.locals&&Bt.Z.locals;const Dt={AFrame:(b||(b=function(){let b=!1;const y=["latest","0.9.0","0.8.2"],E=y[1],a=()=>{window.XR8&&(window.AFRAME.registerComponent("xrconfig",XR8.AFrame.xrconfigComponent()),window.AFRAME.registerComponent("xrweb",XR8.AFrame.xrwebComponent()),window.AFRAME.registerComponent("xrface",XR8.AFrame.xrfaceComponent()),window.AFRAME.registerComponent("xrlayers",XR8.AFrame.xrlayersComponent()),window.AFRAME.registerComponent("xrlayerscene",XR8.AFrame.xrlayersceneComponent()),window.AFRAME.registerPrimitive("sky-scene",XR8.AFrame.skyscenePrimitive())),window.XRExtras&&window.XRExtras.AFrame.registerXrExtrasComponents()},s=w=>Object.keys(w).map((x=>AFRAME.registerComponent(x,w[x]))),l=()=>{var x;!b&&window.AFRAME&&(b=!0,AFRAME.registerSystem("eager-load-system",{init(){try{window.XRExtras?o():window.addEventListener("xrextrasloaded",o,{once:!0})}catch(w){console.error(w)}}}),s((0,w.q)()),x={"xrextras-faceanchor":{defaultComponents:{"xrextras-faceanchor":{}},mappings:{"face-id":"xrextras-faceanchor.faceId"}},"xrextras-resource":{defaultComponents:{"xrextras-resource":{}},mappings:{src:"xrextras-resource.src"}},"xrextras-pbr-material":{defaultComponents:{"xrextras-pbr-material":{}},mappings:{tex:"xrextras-pbr-material.tex",metalness:"xrextras-pbr-material.metalness",normals:"xrextras-pbr-material.normals",roughness:"xrextras-pbr-material.roughness",alpha:"xrextras-pbr-material.alpha",opacity:"xrextras-pbr-material.opacity"}},"xrextras-basic-material":{defaultComponents:{"xrextras-basic-material":{}},mappings:{tex:"xrextras-basic-material.tex",alpha:"xrextras-basic-material.alpha",opacity:"xrextras-basic-material.opacity"}},"xrextras-video-material":{defaultComponents:{"xrextras-video-material":{}},mappings:{video:"xrextras-video-material.video",alpha:"xrextras-video-material.alpha",autoplay:"xrextras-video-material.autoplay",opacity:"xrextras-video-material.opacity"}},"xrextras-face-mesh":{defaultComponents:{"xrextras-face-mesh":{}},mappings:{"material-resource":"xrextras-face-mesh.material-resource"}},"xrextras-face-attachment":{defaultComponents:{"xrextras-face-attachment":{}},mappings:{point:"xrextras-face-attachment.point"}},"xrextras-ear-attachment":{defaultComponents:{"xrextras-ear-attachment":{}},mappings:{point:"xrextras-ear-attachment.point"}},"xrextras-capture-button":{defaultComponents:{"xrextras-capture-button":{}},mappings:{"capture-mode":"xrextras-capture-button.captureMode"}},"xrextras-capture-preview":{defaultComponents:{"xrextras-capture-preview":{}},mappings:{"action-button-view-text":"xrextras-capture-preview.actionButtonViewText","action-button-share-text":"xrextras-capture-preview.actionButtonShareText","finalize-text":"xrextras-capture-preview.finalizeText"}},"xrextras-capture-config":{defaultComponents:{"xrextras-capture-config":{}},mappings:{"enable-end-card":"xrextras-capture-config.enableEndCard","short-link":"xrextras-capture-config.shortLink","cover-image-url":"xrextras-capture-config.coverImageUrl","footer-image-url":"xrextras-capture-config.footerImageUrl","max-duration-ms":"xrextras-capture-config.maxDurationMs","end-card-call-to-action":"xrextras-capture-config.endCardCallToAction","max-dimension":"xrextras-capture-config.maxDimension","watermark-image-url":"xrextras-capture-config.watermarkImageUrl","watermark-max-width":"xrextras-capture-config.watermarkMaxWidth","watermark-max-height":"xrextras-capture-config.watermarkMaxHeight","watermark-location":"xrextras-capture-config.watermarkLocation","file-name-prefix":"xrextras-capture-config.fileNamePrefix","request-mic":"xrextras-capture-config.requestMic","include-scene-audio":"xrextras-capture-config.includeSceneAudio","exclude-scene-audio":"xrextras-capture-config.excludeSceneAudio"}},"xrextras-curved-target-container":{defaultComponents:{"xrextras-curved-target-container":{}},mappings:{color:"xrextras-curved-target-container.color",width:"xrextras-curved-target-container.width",height:"xrextras-curved-target-container.height"}},"xrextras-named-image-target":{defaultComponents:{"xrextras-named-image-target":{}},mappings:{name:"xrextras-named-image-target.name"}},"xrextras-target-mesh":{defaultComponents:{"xrextras-target-mesh":{}},mappings:{"material-resource":"xrextras-target-mesh.material-resource","target-geometry":"xrextras-target-mesh.geometry",height:"xrextras-target-mesh.height",width:"xrextras-target-mesh.width"}},"xrextras-target-video-fade":{defaultComponents:{"xrextras-target-video-fade":{}},mappings:{video:"xrextras-target-video-fade.video",width:"xrextras-target-video-fade.width",height:"xrextras-target-video-fade.height"}},"xrextras-target-video-sound":{defaultComponents:{"xrextras-target-video-sound":{}},mappings:{video:"xrextras-target-video-sound.video",thumb:"xrextras-target-video-sound.thumb",width:"xrextras-target-video-sound.width",height:"xrextras-target-video-sound.height"}},"xrextras-opaque-background":{defaultComponents:{"xrextras-opaque-background":{}},mappings:{remove:"xrextras-opaque-background.remove"}},"xrextras-hand-attachment":{defaultComponents:{"xrextras-hand-attachment":{}},mappings:{point:"xrextras-hand-attachment.point","point-type":"xrextras-hand-attachment.pointType"}},"xrextras-hand-anchor":{defaultComponents:{"xrextras-hand-anchor":{}}},"xrextras-hand-mesh":{defaultComponents:{"xrextras-hand-mesh":{}},mappings:{"material-resource":"xrextras-hand-mesh.material-resource",wireframe:"xrextras-hand-mesh.wireframe","uv-orientation":"xrextras-hand-mesh.uv-orientation"}},"xrextras-hand-occluder":{defaultComponents:{"xrextras-hand-occluder":{}},mappings:{show:"xrextras-hand-occluder.show",adjustment:"xrextras-hand-occluder.adjustment"}},"xrextras-wrist-mesh":{defaultComponents:{"xrextras-wrist-mesh":{}},mappings:{"material-resource":"xrextras-wrist-mesh.material-resource",wireframe:"xrextras-wrist-mesh.wireframe",occluder:"xrextras-wrist-mesh.occluder"}}},Object.keys(x).map((w=>AFRAME.registerPrimitive(w,x[w]))))};return l(),{loadAFrameForXr:w=>{const{version:b="latest",components:C={}}=w||{};return(w=>new Promise(((x,b)=>y.includes(w)?x("latest"===w?E:w):b(`'${w}' is an unsupported AFrame version. Alowed versions: (${y})`))))(b).then((w=>{return x=`//cdn.8thwall.com/web/aframe/8frame-${w}.min.js`,new Promise(((w,b)=>document.head.appendChild(Object.assign(document.createElement("script"),{async:!0,onload:w,onError:b,src:x}))));var x})).then(a).then(x.ensureXrAndExtras).then((w=>s(C)))},registerXrExtrasComponents:l}}()),b),AlmostThere:(Q||(Q=function(){let w,x=null,b=null;const r=w=>{document.getElementById(w).classList.remove("hidden")},i=()=>{x&&(x.parentNode.removeChild(x),x=null)},o=b=>!(x||!XR8.XrDevice.isDeviceBrowserCompatible(b)&&((b=>{const y=document.createElement("template");y.innerHTML='<div id="almostthereContainer" class="absolute-fill"> <div id="error_msg_device" class="hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-20"> <div id="qrcode"></div> <br/> <div class="desktop-message"> <span> To view, open camera on smartphone and scan code </span> </div> <div class="desktop-hint"> <span style="font-size:15pt;line-height:20pt;letter-spacing:-.21"> or visit <br/><span class="desktop-home-link"></span><br/> on a smartphone or tablet. </span> </div> <img class="foreground-image poweredby-img desktop" src="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-4.svg"> </div> </div> </div> <div id="error_msg_open_in_safari" class="hidden absolute-fill"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <span id="error_text_header_top" class="hidden open-header-top"> <h2>Open in Safari<br/> to view AR</h2> </span> <span id="error_text_header_bottom" class="hidden open-header-bottom"> <h2>Open in Safari<br/> to view AR</h2> </span> <img class="app-header-img"> <img class="foreground-image poweredby-img" src="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-4.svg"> <br/> <img id="top_corner_open_safari" src="//cdn.8thwall.com/web/img/almostthere/v2/xtra-arrow.svg" class="foreground-image arrow-top-corner hidden"/> <img id="top_close_open_safari" src="//cdn.8thwall.com/web/img/almostthere/v2/xtra-arrow.svg" class="foreground-image arrow-top-close hidden"/> <img id="bottom_corner_open_safari" src="//cdn.8thwall.com/web/img/almostthere/v2/xtra-arrow.svg" class="foreground-image arrow-bottom-corner hidden"/> <img id="bottom_close_open_safari" src="//cdn.8thwall.com/web/img/almostthere/v2/xtra-arrow.svg" class="foreground-image arrow-bottom-close hidden"/> </div> </div> </div> <div id="error_unknown_webview" class="hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <span id="error_text_header_unknown" class="open-header-unknown"> <h2>Open in Safari<br/> to view AR</h2> </span> <img id="app_img" class="app-header-img unknown"> <br/> <span id="app_link" class="desktop-home-link mobile"></span> <button id="error_copy_link_btn" class="copy-link-btn">Copy Link</button> <img class="foreground-image poweredby-img" src="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-4.svg"> </div> </div> </div> <div id="error_msg_web_assembly_ios" class="hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <p><img class="foreground-image safari-hero-image" src="//cdn.8thwall.com/web/img/almostthere/v2/safari-fallback.png"></p> <div class="error-text-header">You\'re almost there!</div> <div class="error-text-detail"> To view this experience, please update to a newer version of iOS. </div> </div> </div> </div> <div id="error_msg_web_assembly_android" class="hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <p><img src="//cdn.8thwall.com/web/img/almostthere/v1/google-chrome.png"></p> <div class="error-text-header">You\'re almost there!</div> <div class="error-text-detail"> Browser doesn\'t support WebAssembly. Please update your browser. </div> </div> </div> </div> <div id="error_msg_android_almost_there" class="hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <p><img height="100px" src="//cdn.8thwall.com/web/img/almostthere/v1/google-chrome.png"></p> <div class="error-text-header">You\'re almost there!</div> <div id="error_msg_detail_android_almost_there" class="hidden error-text-detail"> To view this experience on your Android device, please open in Google Chrome or your native browser. </div> <div id="error_msg_detail_huawei_almost_there" class="hidden error-text-detail"> To view this experience on your Huawei device, please open in Google Chrome or UC Browser. </div> <br/> <p><span class="desktop-home-link"></span></p> <div id="android_copy_hint" class="error-text-hint">Open your browser and paste.</div> </div> </div> </div> </div> '.trim(),x=y.content.firstChild,document.getElementsByTagName("body")[0].appendChild(x);const E=w||window.location.href,C=x.querySelectorAll(".desktop-home-link");for(let w=0;w<C.length;w++)C[w].textContent=E;const D=XR8.XrDevice.incompatibleReasons(b),P=XR8.XrDevice.incompatibleReasonDetails(b),X=XR8.XrDevice.deviceEstimate(),N=document.querySelector('meta[name="og:image"]'),q=N&&N.content;Array.from(document.querySelectorAll(".app-header-img")).forEach((w=>{q?w.src=q:(w.classList.add("foreground-image"),w.src="https://cdn.8thwall.com/web/img/almostthere/v2/safari-fallback.png")}));const U=document.getElementById("error_copy_link_btn");if(U.addEventListener("click",(()=>{const w=document.createElement("input");document.body.appendChild(w),w.value=E,w.select(),document.execCommand("copy"),document.body.removeChild(w),U.innerHTML="Copied!",U.classList.add("error-copy-link-copied")})),D.includes(XR8.XrDevice.IncompatibilityReasons.UNSUPPORTED_BROWSER)&&"iOS"===X.os)if("Safari"===P.inAppBrowserType)r("error_msg_open_in_safari");else switch(P.inAppBrowser){case"Instagram":case"Facebook":case"WeChat":case"LinkedIn":case"QQ":case"Sino Weibo":case"Snapchat":r("error_msg_open_in_safari"),r("error_text_header_top"),r("top_corner_open_safari"),"Instagram"===P.inAppBrowser&&document.body.classList.add("bottombarbump");break;case"Facebook Messenger":case"Kakao Talk":case"Naver":r("error_msg_open_in_safari"),r("error_text_header_bottom"),r("bottom_corner_open_safari");break;case"Line":case"Mozilla Firefox Focus":r("error_msg_open_in_safari"),r("error_text_header_top"),r("top_close_open_safari");break;default:r("error_unknown_webview")}else{if(D.includes(XR8.XrDevice.IncompatibilityReasons.MISSING_WEB_ASSEMBLY)){if("iOS"===X.os)return void r("error_msg_web_assembly_ios");if("Android"===X.os)return void r("error_msg_web_assembly_android")}if("iOS"===X.os)return r("error_unknown_webview"),void r("error_text_header_unknown");if("Android"===X.os)return r("error_msg_android_almost_there"),void("Huawei"===X.manufacturer?r("error_msg_detail_huawei_almost_there"):r("error_msg_detail_android_almost_there"));r("error_msg_device"),document.getElementById("qrcode").innerHTML=`<svg\n  xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink"\n  viewBox="0 0 250 250"\n  width="250" height="250"\n>\n  <image\n    width="250"\n    height="250"\n    xlink:href="https://8th.io/qr?v=2&margin=2&url=${encodeURIComponent(E)}"\n  />\n</svg>`}})(b),XR8.pause(),XR8.stop(),1));return{pipelineModule:()=>({name:"almostthere",onBeforeRun:w=>{b=w&&w.config},onCameraStatusChange:()=>{if(!o(b))throw Error("Device or browser incompatible with XR.")},onRemove:()=>{i()},onException:()=>{o(b)}}),checkCompatibility:o,configure:({url:x})=>{void 0!==x&&(w=x)},hideAlmostThere:i}}()),Q),DebugWebViews:(J||(J=function(){let w="";const x=window.console.log;return{enableLogToScreen:()=>{const n=b=>{x(b),w=`${w}* ${b}<br>`;let y=document.getElementById("logdiv");if(!y){const w=document.getElementsByTagName("body")[0];if(!w)return;y=document.createElement("div"),w.appendChild(y),y.style.zIndex=850,y.style.position="absolute",y.style.top="0px",y.style.left="0px",y.style.backgroundColor="#FFFFFF",y.id="logdiv"}y.innerHTML=`<pre>${w}</pre>`};window.console.log=n,window.console.error=w=>{n(`<font color=red>${w}</font>`)},window.console.warn=w=>{n(`<font color=orange>${w}</font>`)}}}}()),J),FullWindowCanvas:(0,ee.w)(),Lifecycle:{attachListener:{add:w=>T().add(w),delete:w=>T().delete(w)}},Loading:(re||(re=function(){let w,x,b,y,E,C,D,P,X,N,q,U,V,W=null,u=()=>!0,Z=!1,$=0,G=!1,Y=!1,K=!1,Q=null;const J=navigator.userAgent;let ee,te=!1;const R=()=>{te=!0,window.removeEventListener("devicemotion",R)};window.addEventListener("devicemotion",R);const k=()=>{const w=XR8.XrDevice.deviceEstimate();return w.browser.inAppBrowser?w.browser.inAppBrowser:"Mobile Safari"===w.browser.name?"":w.browser.name},M=w=>{(w.data.deviceOrientation8w||w.data.deviceMotion8w)&&(te=!0,window.removeEventListener("message",M))};window.addEventListener("message",M);const L=(Z=!0)=>{w&&w.classList.add("hidden"),Z&&(W&&W.parentNode&&W.parentNode.removeChild(W),W=null,w=null,x=null,b=null,y=null,E=null,C=null,D=null,P=null,X=null,V=null,N=null,U=null,q=null)},A=(b=!0)=>{x&&x.classList.add("fade-out"),setTimeout((()=>{w&&(w.classList.add("fade-out"),w.style.pointerEvents="none"),setTimeout((()=>L(b)),400)}),400)},T=()=>{b.classList.add("fade-out")},S=()=>{b.classList.add("hidden");const w=document.querySelector('meta[name="og:image"]'),x=w&&w.content;Array.from(document.querySelectorAll(".app-header-img")).forEach((w=>{x?w.src=x:(w.classList.add("foreground-image"),w.src="https://cdn.8thwall.com/web/img/almostthere/v2/android-fallback.png")}));const y=document.getElementById("open_browser_android"),E=window.location.href.replace(/^https:\/\//,"");y.href=`intent://${E}#Intent;scheme=https;action=android.intent.action.VIEW;end;`,P.classList.remove("hidden"),A(!1),XR8.pause(),XR8.stop()},I=()=>{b.classList.add("hidden");const w=document.querySelector('meta[name="og:image"]'),x=w&&w.content;Array.from(document.querySelectorAll(".app-header-img")).forEach((w=>{x?w.src=x:(w.classList.add("foreground-image"),w.src="https://cdn.8thwall.com/web/img/almostthere/v2/android-fallback.png")}));const y=window.location.href,E=document.querySelectorAll(".desktop-home-link");for(let w=0;w<E.length;w++)E[w].textContent=y;const C=document.getElementById("copy_link_android");C.addEventListener("click",(()=>{const w=document.createElement("input");document.body.appendChild(w),w.value=y,w.select(),document.execCommand("copy"),document.body.removeChild(w),C.innerHTML="Copied!",C.classList.add("error-copy-link-copied")})),X.classList.remove("hidden"),A(!1),XR8.pause(),XR8.stop()},B=()=>{if(window.removeEventListener("devicemotion",R),window.removeEventListener("message",M),"iOS"===XR8.XrDevice.deviceEstimate().os){if(XR8.XrPermissions){const w=XR8.XrPermissions.permissions(),x=XR8.requiredPermissions();if(!x.has(w.DEVICE_MOTION)&&!x.has(w.DEVICE_ORIENTATION))return}XR8.XrDevice.deviceEstimate().osVersion.startsWith("12")?V.classList.remove("hidden"):(q.classList.remove("hidden"),q.getElementsByClassName("wk-app-name")[0].innerText=k()),A(!1),XR8.pause(),XR8.stop()}},_=$=>{if(W)return;const Y=document.createElement("template");Y.innerHTML='<div id="loadingContainer" class="absolute-fill"> <div id="loadBackground" class="absolute-fill"> <div id="loadImageContainer" class="absolute-fill"> <img src="//cdn.8thwall.com/web/img/loading/v2/load-grad.png" id="loadImage" class="spin"/> <img class="foreground-image poweredby-img" src="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-4.svg"/> </div> </div> <div id="requestingCameraPermissions" class="hidden"> <img id="requestingCameraIcon" src="//cdn.8thwall.com/web/img/loading/v2/camera.svg"/> Tap \'Allow\' to access AR </div> <div id="cameraPermissionsErrorApple" class="absolute-fill hidden"> <div class="permissionIconIos"> <img class="foreground-image" src="//cdn.8thwall.com/web/img/loading/v2/camera.svg"/> </div> <p id="cameraPermissionsErrorAppleMessage"> Reload the page and enable camera access </p> <div class="bottom-message"> Ensure camera access is allowed in <span class="wk-app-name"></span> app settings </div> </div> <div id="cameraPermissionsErrorAndroid" class="absolute-fill hidden"> <div class="permissionIcon"> <img class="foreground-image" src="//cdn.8thwall.com/web/img/loading/v2/camera.svg"/> </div> <div class="loading-error-header">Let\'s enable your camera</div> <ol class="loading-error-instructions"> <li>Tap the <img class="foreground-image" src="//cdn.8thwall.com/web/img/loading/v2/dots.svg"> in the top right </li> <li>Tap Settings</li> <li class="chrome-instruction hidden"> <span class="highlight">Site settings</span> </li> <li class="chrome-instruction hidden"> <span class="highlight">Camera</span> </li> <li class="chrome-instruction hidden"> <span class="highlight">Blocked</span> <br> <span class="camera-instruction-block domain-view">apps.8thwall.com</span> </li> <li class="chrome-instruction hidden"> <span class="camera-instruction-button">CLEAR & RESET</span> </li> <li class="samsung-instruction hidden"> <span class="highlight">Advanced</span> </li> <li class="samsung-instruction hidden"> <span class="highlight">Manage website data</span> </li> <li class="samsung-instruction hidden"> Press and hold<br> <span class="camera-instruction-block domain-view">apps.8thwall.com</span> </li> <li class="samsung-instruction hidden"> <span class="highlight" style="color:#1500ba">DELETE</span> </li> </ol> <div class="loading-error-footer"> <img class="foreground-image" style="transform:rotate(130deg)" src="//cdn.8thwall.com/web/img/loading/v2/reload.svg"/> Then, reload the page for AR! </div> </div> <div id="microphonePermissionsErrorApple" class="absolute-fill hidden"> <div class="permissionIconIos"> <img class="foreground-image" src="//cdn.8thwall.com/web/img/loading/v2/camera.svg"/> <img class="foreground-image" src="//cdn.8thwall.com/web/img/loading/v2/microphone.svg"/> </div> <p id="microphonePermissionsErrorAppleMessage"> Reload the page and enable camera + microphone access </p> <div class="bottom-message"> Ensure camera + microphone access is allowed in <span class="wk-app-name"></span> app settings </div> </div> <div id="microphonePermissionsErrorAndroid" class="absolute-fill hidden"> <div class="permissionIcon"> <img class="foreground-image" src="//cdn.8thwall.com/web/img/loading/v2/microphone.svg"/> </div> <div class="loading-error-header">Let\'s enable your microphone</div> <ol class="loading-error-instructions"> <li>Tap the <img class="foreground-image" src="//cdn.8thwall.com/web/img/loading/v2/dots.svg"> in the top right </li> <li>Tap Settings</li> <li class="chrome-instruction hidden"> <span class="highlight">Site settings</span> </li> <li class="chrome-instruction hidden"> <span class="highlight">Microphone</span> </li> <li class="chrome-instruction hidden"> <span class="highlight">Blocked</span> <br> <span class="microphone-instruction-block domain-view">apps.8thwall.com</span> </li> <li class="chrome-instruction hidden"> <span class="microphone-instruction-button">CLEAR & RESET</span> </li> <li class="chrome-instruction hidden"> <span class="highlight">Do the same for Camera</span> </li> <li class="samsung-instruction hidden"> <span class="highlight">Advanced</span> </li> <li class="samsung-instruction hidden"> <span class="highlight">Manage website data</span> </li> <li class="samsung-instruction hidden"> Press and hold<br> <span class="microphone-instruction-block domain-view">apps.8thwall.com</span> </li> <li class="samsung-instruction hidden"> <span class="highlight" style="color:#1500ba">DELETE</span> </li> </ol> <div class="loading-error-footer"> <img class="foreground-image" style="transform:rotate(130deg)" src="//cdn.8thwall.com/web/img/loading/v2/reload.svg"/> Then, reload the page for AR! </div> </div> <div id="linkOutViewAndroid" class="absolute-fill hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <img id="app_img" class="app-header-img unknown"> <br/> <a id="open_browser_android" class="start-ar-button">Start AR</a> <img class="foreground-image poweredby-img" src="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-4.svg"> </div> </div> </div> <div id="copyLinkViewAndroid" class="absolute-fill hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <span id="error_text_header_unknown" class="open-header-unknown"> <h2>Open in Browser<br/> to view AR</h2> </span> <img id="app_img" class="app-header-img unknown"> <br/> <span id="app_link" class="desktop-home-link mobile"></span> <button id="copy_link_android" class="copy-link-btn">Copy Link</button> <img class="foreground-image poweredby-img" src="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-4.svg"> </div> </div> </div> <div id="deviceMotionErrorApple" class="absolute-fill hidden"> <div class="loading-error-header">Let\'s enable your motion sensors</div> <ol class="loading-error-instructions"> <li>Open <img src="https://cdn.8thwall.com/web/img/loading/v1/settings-icon-ios.png" style="max-height:4vh"><b>Settings</b></li> <li>Select <img src="https://cdn.8thwall.com/web/img/loading/v1/safari-icon.png" style="max-height:4vh"><b>Safari</b></li> <li>Enable <span class="highlight">Motion&nbsp;&amp;&nbsp;Orientation Access</span></li> <li>Reload the page <img class="foreground-image" style="transform:rotate(130deg)" src="//cdn.8thwall.com/web/img/loading/v2/reload.svg"></li> </ol> <div class="loading-error-footer"></div> </div> <div id="userPromptError" class="permission-error absolute-fill hidden"> <h1>Permissions were denied.</h1> <p>You need to accept motion permissions to continue.</p> <button id="reloadButton" class="main-button" onClick="window.location.reload()">Refresh</button> </div> <div id="motionPermissionsErrorApple" class="permission-error absolute-fill hidden"> <h1>Permissions were denied.</h1> <p>You\'ve prevented the page from accessing your motion sensors.</p> <p>Please close <span class="wk-app-name"></span> app to reenable your motion sensors.</p> </div> <div id="cameraSelectionWorldTrackingError" class="permission-error absolute-fill hidden"> <p><img height="75px" src="//cdn.8thwall.com/web/img/runtimeerror/v1/computer-voxel.png" class="floater"></p> <div class="error-text-header">Oops, something went wrong!</div> <p id="camera_mode_world_tracking_error"></p> </div> <div id="debug-message" style="color:#eee;word-break:break-all;position:absolute;top:0"></div> </div> '.trim();const K=Y.content.firstChild;document.getElementsByTagName("body")[0].appendChild(K),(Z=>{W=Z,w=W.querySelector("#loadBackground"),x=W.querySelector("#loadImageContainer"),b=document.getElementById("requestingCameraPermissions"),y=document.getElementById("cameraPermissionsErrorAndroid"),E=document.getElementById("cameraPermissionsErrorApple"),C=document.getElementById("microphonePermissionsErrorAndroid"),D=document.getElementById("microphonePermissionsErrorApple"),P=document.getElementById("linkOutViewAndroid"),X=document.getElementById("copyLinkViewAndroid"),V=document.getElementById("deviceMotionErrorApple"),N=document.getElementById("userPromptError"),U=document.getElementById("cameraSelectionWorldTrackingError"),q=document.getElementById("motionPermissionsErrorApple")})(K),G=!0,$&&$.waitForRealityTexture&&(Z=!0),$&&$.onxrloaded&&(window.XR8?$.onxrloaded():window.addEventListener("xrloaded",$.onxrloaded))},ne=J.includes("Linux");K=ne&&!document.cookie.includes("previouslyGotCameraPermission=true");const re=ne&&!K;return{pipelineModule:()=>({name:"loading",onStart:()=>{!0!==te&&B()},onUpdate:({processCpuResult:w})=>{if(G){if(Z){const{reality:x,facecontroller:b,handcontroller:y,layerscontroller:E}=w,C=x&&x.realityTexture,D=b&&b.cameraFeedTexture,P=y&&y.cameraFeedTexture,X=E&&E.cameraFeedTexture;if(!(C||D||P||X))return}$++,$>5&&!Y&&u()&&(K&&(document.cookie="previouslyGotCameraPermission=true;max-age=31536000"),A(),G=!1)}},onAppResourcesLoaded:()=>{Y=!1},onBeforeRun:w=>{Q=w&&w.config,Y=!0,$=0,_()},onCameraStatusChange:({status:w,config:x,reason:P})=>{if(XR8.XrDevice.isDeviceBrowserCompatible(Q)&&W)if("requesting"===w){if(x.verbose){const w=document.getElementById("camera_mode_world_tracking_error");w&&(w.innerText=JSON.stringify({ua:J,device:XR8.XrDevice.deviceEstimate()}))}XR8.XrDevice.deviceEstimate().browser.inAppBrowser&&(ee=setTimeout((()=>{"iOS"!==XR8.XrDevice.deviceEstimate().os&&(XR8.pause(),XR8.stop(),S())}),3e3)),_(),re||b.classList.remove("hidden")}else if("hasStream"===w)clearTimeout(ee),re||T();else if("hasVideo"===w);else if("failed"===w){clearTimeout(ee);const w=XR8.XrDevice.deviceEstimate();if(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)switch(w.browser.inAppBrowser){case"Sino Weibo":case"WeChat":I();break;case void 0:case"Apple News":case"Facebook Messenger":case"Facebook":case"Google Chrome":case"Instagram":case"Line":case"LinkedIn":case"Microsoft Edge":case"Mozilla Firefox Focus":case"Naver":case"Opera Touch":case"Pinterest":case"Snapchat":(w=>{b.classList.add("hidden"),"NO_MICROPHONE"===w||"DENY_MICROPHONE"===w?(()=>{if(J.includes("Linux")){let w;const x=W.querySelectorAll(".domain-view");for(let w=0;w<x.length;w++)x[w].textContent=window.location.hostname;w=navigator.userAgent.includes("SamsungBrowser")?W.querySelectorAll(".samsung-instruction"):W.querySelectorAll(".chrome-instruction"),C.classList.remove("hidden"),w.forEach((w=>{w.classList.remove("hidden")}))}else D.classList.remove("hidden"),D.getElementsByClassName("wk-app-name")[0].innerText=k()})():(()=>{if(J.includes("Linux")){let w;const x=W.querySelectorAll(".domain-view");for(let w=0;w<x.length;w++)x[w].textContent=window.location.hostname;w=navigator.userAgent.includes("SamsungBrowser")?W.querySelectorAll(".samsung-instruction"):W.querySelectorAll(".chrome-instruction"),y.classList.remove("hidden"),w.forEach((w=>{w.classList.remove("hidden")}))}else E.classList.remove("hidden"),E.getElementsByClassName("wk-app-name")[0].innerText=k()})(),A(!1),XR8.pause(),XR8.stop()})(P);break;default:S()}else I()}},onDetach:()=>{Z=!1,G=!1},onRemove:()=>{L()},onException:w=>{if(W){if(w instanceof Object){if("permission"===w.type){if("prompt"===w.permission)return A(!1),void N.classList.remove("hidden");if(w.permission===XR8.XrPermissions.permissions().DEVICE_MOTION||w.permission===XR8.XrPermissions.permissions().DEVICE_ORIENTATION)return void B()}if("configuration"===w.type&&"reality"===w.source&&"slam-front-camera-unsupported"===w.err){A(!1);const x=document.getElementById("camera_mode_world_tracking_error");return void(x&&(x.innerHTML=w.message,U.classList.remove("hidden"),XR8.pause(),XR8.stop()))}}T(),L()}}}),showLoading:_,setAppLoadedProvider:w=>{u=w}}}()),re),PauseOnBlur:(null==ce&&(ce=function(){const e=()=>{XR8.pause()},t=()=>{XR8.resume()};return{pipelineModule:()=>({name:"pauseonblur",onAttach:()=>{window.addEventListener("blur",e),window.addEventListener("focus",t)},onDetach:()=>{window.removeEventListener("blur",e),window.removeEventListener("focus",t)}})}}()),ce),PauseOnHidden:(null==me&&(me=function(){const e=()=>{"visible"===document.visibilityState?XR8.resume():XR8.pause()};return{pipelineModule:()=>({name:"pauseonhidden",onAttach:()=>{document.addEventListener("visibilitychange",e)},onDetach:()=>{document.removeEventListener("visibilitychange",e)}})}}()),me),PlayCanvas:(he||(he={findOneCamera:w=>{const x=w.root.findComponents("camera");if(x.length)return x.length>1&&console.warn(`Found too many cameras (${x.length}) in the scene graph of ${w.name}`),x[0].entity;console.error(`Couldn't find any cameras in the scene graph of ${w.name}`)},makeShadowMaterial:({pc:w,material:x})=>{const b=x.resource||x;b.chunks.APIVersion=w.CHUNKAPI_1_62,b.chunks.endPS="\n      litShaderArgs.opacity = mix(light0_shadowIntensity, 0.0, shadow0);\n      gl_FragColor.rgb = vec3(0.0);\n    ",b.blendType=w.BLEND_PREMULTIPLIED,b.update()},trackImageTargetWithName:({name:w,entity:x,app:b})=>{x.enabled=!1;const r=b=>{if(w!=b.name)return;const{rotation:y,position:E,scale:C}=b;x.setRotation(y.x,y.y,y.z,y.w),x.setPosition(E.x,E.y,E.z),x.setLocalScale(C,C,C),x.enabled=!0};b.on("xr:imagefound",r,{}),b.on("xr:imageupdated",r,{}),b.on("xr:imagelost",(b=>{w==b.name&&(x.enabled=!1)}),{})}}),he),PwaInstaller:(ge||(ge=(()=>{const w={delayAfterDismissalMillis:7776e6,minNumVisits:2},x={preferredName:()=>(document.querySelector('meta[name="8thwall:pwa_name"]')||{content:""}).content,preferredIconSrc:()=>(document.querySelector('meta[name="8thwall:pwa_icon"]')||{content:""}).content,preferredInstallTitle:()=>"Add to your home screen",preferredInstallSubtitle:()=>"for easy access.",preferredInstallButtonText:()=>"Install",preferredIosInstallText:()=>'Tap $ACTION_ICON and then "Add to Homescreen"'};let b=0,y=!0,E=null,C=null,D=!1,P=null,l=function(w,x,b){if(!XR8.XrDevice.isDeviceBrowserCompatible(P))return!1;if("iOS"!==XR8.XrDevice.deviceEstimate().os&&!fe)return!1;const y=(new Date).getTime(),E=w.delayAfterDismissalMillis;return!(x&&y<x+E)&&(!(b<w.minNumVisits)&&("pwa"!==new URL(location.href).searchParams.get("mode")&&!window.matchMedia("(display-mode: standalone)").matches))},d=function(w,x,b){const y=document.createElement("template");y.innerHTML='<div class="pwa-installer-root"> <div class="backdrop"></div> <div class="drawer"> <div class="container"> <div class="content"> <button id="close-button" class="close-button"> <span class="close"></span> </button> <div class="icon-container"> <img id="pwa-icon-preview" class="icon-preview"/> </div> <p id="pwa-name" class="pwa-name"></p> <p id="install-title" class="install-title"></p> <p id="install-subtitle" class="install-subtitle">for easy access.</p> <p id="ios-install-action" class="install-action-text hidden"></p> <button id="android-install-action" class="install-button hidden"></button> </div> </div> </div> </div> '.trim(),E=y.content.firstChild,("iOS"!==XR8.XrDevice.deviceEstimate().os?E.querySelector("#android-install-action"):E.querySelector("#ios-install-action")).classList.remove("hidden");const C=E.querySelector("#pwa-icon-preview");C&&(C.src=w.iconSrc);const D=E.querySelector("#pwa-name");D&&(D.innerHTML=w.name);const P=E.querySelector("#install-title");P&&(P.innerHTML=w.installTitle);const X=E.querySelector("#install-subtitle");X&&(X.innerHTML=w.installSubtitle);const N=E.querySelector("#close-button");N&&(N.onclick=b);const q=E.querySelector("#android-install-action");q&&(q.innerHTML=w.installButtonText,q.onclick=()=>fe?(fe.prompt(),fe.userChoice.then((w=>{"accepted"===w.outcome?x():b(),fe=null}))):(console.error("Attempting install app without `beforeinstallprompt` event"),c(),Promise.resolve()));const U=E.querySelector("#ios-install-action");if(U){const x=w.iosInstallText&&w.iosInstallText.replace("$ACTION_ICON",'<svg focusable="false" viewBox="0 0 24 24" aria-hidden="true"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(6, 7)" fill="#4A90E2"> <g> <path d="M6.39209659,3.4962638 L6.39209659,9.59103653 C6.39209659,\n          9.98342289 6.07402841,10.3013206 5.6818125,10.3013206 C5.28959659,\n          10.3013206 4.97152841,9.98342289 4.97152841,9.59103653 L4.97152841,\n          3.4962638 L4.17516477,4.29262744 C3.89783523,4.56995698 3.44817614,\n          4.56995698 3.17084659,4.29262744 C2.89351705,4.01529789 2.89351705,\n          3.5656388 3.17084659,3.28830925 L5.17965341,1.27950244 C5.45698295,\n          1.00217289 5.90664205,1.00217289 6.18397159,1.27950244 L8.19277841,\n          3.28830925 C8.47010795,3.5656388 8.47010795,4.01529789 8.19277841,\n          4.29262744 C7.91561932,4.56995698 7.46578977,4.56995698 7.18846023,\n          4.29262744 L6.39209659,3.4962638 Z M9.94317614,4.96852841 C10.7277784,\n          4.96852841 11.3635739,5.60449432 11.3635739,6.38909659 L11.3635739,\n          13.4912557 C11.3635739,14.275858 10.7277784,14.9116534 9.94317614,\n          14.9116534 L1.42044886,14.9116534 C0.635846591,14.9116534 -0.000119318182,\n          14.275858 -0.000119318182,13.4912557 L-0.000119318182,\n          6.38909659 C-0.000119318182,5.60449432 0.635846591,4.96852841 1.42044886,\n          4.96852841 L2.1305625,4.96852841 C2.52294886,4.96852841 2.84084659,\n          5.28659659 2.84084659,5.6788125 C2.84084659,6.07102841 2.52294886,\n          6.38909659 2.1305625,6.38909659 L1.42044886,6.38909659 L1.42044886,\n          13.4912557 L9.94317614,13.4912557 L9.94317614,6.38909659 L9.23289205,\n          6.38909659 C8.84067614,6.38909659 8.52277841,6.07102841 8.52277841,\n          5.6788125 C8.52277841,5.28659659 8.84067614,4.96852841 9.23289205,\n          4.96852841 L9.94317614,4.96852841 Z" id="Fill-1"> </path> </g> </g> </g> </svg> ');U.innerHTML=x}document.getElementsByTagName("body")[0].appendChild(E),installPromptShown=!0},c=function(){E&&(document.getElementsByTagName("body")[0].removeChild(E),E=null)};function m(){c()}function h(){H(O(),(new Date).getTime().toString()),c()}function p(){C&&(clearTimeout(C),C=null);const b=parseInt(z(F(),"0"),10),y=parseInt(z(O(),"0"),10);if(D&&l(w,y,b)){const w={name:x.preferredName(),iconSrc:x.preferredIconSrc(),installTitle:x.preferredInstallTitle(),installSubtitle:x.preferredInstallSubtitle(),installButtonText:x.preferredInstallButtonText(),iosInstallText:x.preferredIosInstallText()};d(w,m,h)}else d?C=setTimeout(p,5e3):c()}function u(w){D=w,p()}return{configure:b=>{const{promptConfig:y,displayConfig:E,shouldDisplayInstallPrompt:C,displayInstallPrompt:D,hideInstallPrompt:P}=b;E&&(E.name&&(x.preferredName=()=>E.name),E.iconSrc&&(x.preferredIconSrc=()=>E.iconSrc),E.installButtonText&&(x.preferredInstallButtonText=()=>E.installButtonText),E.iosInstallText&&(x.preferredIosInstallText=()=>E.iosInstallText),E.installTitle&&(x.preferredInstallTitle=()=>E.installTitle),E.installSubtitle&&(x.preferredInstallSubtitle=()=>E.installSubtitle)),y&&Object.assign(w,y),C&&(l=C),D&&(d=D),P&&(c=P)},pipelineModule:function(){return{name:"pwa-installer",onBeforeRun:w=>{P=w&&w.config,u(!1)},onAttach:()=>{b=0,y=!0},onUpdate:()=>{y&&(b<5?++b:(y=!1,u(!0)))},onDetach:()=>{u(!1)}}},setDisplayAllowed:u}})()),ge),RuntimeError:(xe||(xe=(()=>{let w=!1,x=null;const n=()=>{x&&(x.parentNode.removeChild(x),x=null)};return{pipelineModule:()=>({name:"error",onStart:()=>{w=!0},onRemove:()=>{n()},onException:b=>{if(!w)return;if(x)return;console.error("[RuntimeError] XR caught an error; stopping.",b);const y=document.createElement("template");y.innerHTML='<div id="runtimeErrorContainer" class="absolute-fill"> <div id="error_msg_unknown" class="hidden"> <div class="error-text-outer-container"> <div class="error-text-container error-margin-top-5"> <p><img height="75px" src="//cdn.8thwall.com/web/img/runtimeerror/v1/computer-voxel.png" class="floater"></p> <div class="error-text-header">Oops, something went wrong!</div> <div class="error-text-hint"> <p id="error_unknown_detail"/> </div> </div> </div> </div> </div> '.trim(),x=y.content.firstChild,document.getElementsByTagName("body")[0].appendChild(x),document.getElementById("error_msg_unknown").classList.remove("hidden"),XR8.pause(),XR8.stop()}}),hideRuntimeError:n}})()),xe),Stats:(null==be&&(be={pipelineModule:()=>{let w=null;return{name:"stats",onBeforeRun:()=>window.Stats?Promise.resolve():new Promise(((w,x)=>document.head.appendChild(Object.assign(document.createElement("script"),{async:!0,onload:w,onError:x,src:"https://cdn.8thwall.com/web/aframe/stats.16.min.js"})))),onAttach:()=>{w=new Stats,w.showPanel(0),w.dom.style.zIndex=5e3,w.dom.style.position="absolute",w.dom.style.top="0px",w.dom.style.left="0px",document.body.appendChild(w.dom)},onUpdate:()=>{w.update()},onDetach:()=>{document.body.removeChild(w.dom),w=null}}}}),be),ThreeExtras:(null==ye&&(ye={basicMaterial:({opacity:w,tex:x,alpha:b})=>{let y=null;const E={};return w<1&&(E.transparent=!0,E.opacity=Math.max(0,w)),x&&(y=y||new THREE.TextureLoader,E.map=y.load(x)),b&&(y=y||new THREE.TextureLoader,E.alphaMap=y.load(b)),new THREE.MeshBasicMaterial(E)},createTargetGeometry:(w,x,b,y)=>{switch(w.type){case"FLAT":return((w,x,b)=>new THREE.PlaneGeometry(w.scaledWidth*(b||1),w.scaledHeight*(x||1)))(w,b,y);case"CONICAL":case"CYLINDRICAL":return((w,x,b,y)=>{const E=w.arcLengthRadians*(y||1);return new THREE.CylinderGeometry(w.radiusTop,w.radiusBottom,b?w.height*b:w.height,50,1,!0,(x?0:(2*Math.PI-E)/2)+Math.PI,x?2*Math.PI:E)})(w,!!x,b,y);default:return null}},faceMesh:(w,x)=>{const b=new THREE.BufferGeometry,y=new Float32Array(3*w.pointsPerDetection);b.setAttribute("position",new THREE.BufferAttribute(y,3));const E=new Float32Array(3*w.pointsPerDetection);b.setAttribute("normal",new THREE.BufferAttribute(E,3));const C=new Float32Array(2*w.uvs.length);for(let x=0;x<w.uvs.length;++x)C[2*x]=w.uvs[x].u,C[2*x+1]=w.uvs[x].v;b.setAttribute("uv",new THREE.BufferAttribute(C,2));const D=new Array(3*w.indices.length);for(let x=0;x<w.indices.length;++x)D[3*x]=w.indices[x].a,D[3*x+1]=w.indices[x].b,D[3*x+2]=w.indices[x].c;b.setIndex(D);const P=new THREE.Mesh(b,x);return{mesh:P,show:({detail:w})=>{for(let x=0;x<w.vertices.length;++x)y[3*x]=w.vertices[x].x,y[3*x+1]=w.vertices[x].y,y[3*x+2]=w.vertices[x].z;P.geometry.attributes.position.needsUpdate=!0;for(let x=0;x<w.normals.length;++x)E[3*x]=w.normals[x].x,E[3*x+1]=w.normals[x].y,E[3*x+2]=w.normals[x].z;P.geometry.attributes.normal.needsUpdate=!0,P.visible=!0},hide:()=>{P.visible=!1}}},pbrMaterial:({opacity:w,tex:x,metalness:b,normals:y,roughness:E,alpha:C})=>{let D=null;const P={};return w<1&&(P.transparent=!0,P.opacity=Math.max(0,w)),x&&(D=D||new THREE.TextureLoader,P.map=D.load(x)),b&&(D=D||new THREE.TextureLoader,P.metalnessMap=D.load(b)),y&&(D=D||new THREE.TextureLoader,P.normalMap=D.load(y)),E&&(D=D||new THREE.TextureLoader,P.roughnessMap=D.load(E)),C&&(D=D||new THREE.TextureLoader,P.alphaMap=D.load(C)),new THREE.MeshStandardMaterial(P)},videoMaterial:({opacity:w,video:x,alpha:b})=>{let y=null;const E={};return w<1&&(E.transparent=!0,E.opacity=Math.max(0,w)),x&&(E.map=new THREE.VideoTexture(x)),b&&(y=y||new THREE.TextureLoader,E.alphaMap=y.load(b)),new THREE.MeshBasicMaterial(E)}}),ye),MediaRecorder:St,SessionReconfigure:(0,It.SessionReconfigureFactory)()};((w,x,b,y)=>{let E=!1;Object.defineProperty(w,"PauseOnBlur",{get:()=>(E||(E=!0,console.warn("[XR] Deprecation Warning:","XRExtras.PauseOnBlur was deprecated in R17.0. Use PauseOnHidden instead."),console.warn(Error().stack.replace(/^Error.*\n\s*/,"").replace(/\n\s+/g,"\n"))),b)})})(Dt,0,Dt.PauseOnBlur);const gt=()=>{setTimeout((()=>{window.dispatchEvent(new CustomEvent("xrandextrasloaded"))}),1)};!window.XR8&&window.XR&&"function"==typeof window.XR&&(window.nativeXR=window.XR,window.XR=void 0),window.XRExtras=Dt,setTimeout((()=>window.dispatchEvent(new CustomEvent("xrextrasloaded"))),1),window.XR8?gt():window.addEventListener("xrloaded",gt)})()})();(()=>{const t=pc.createScript("App");t.prototype.initialize=function(){this.params=new URLSearchParams(window.location.search),this.params.noxr=null!==this.params.get("noxr"),this.params.scene=this.params.get("scene"),this.params.quality=this.params.get("quality"),this.params.local=null!==this.params.get("local"),this.handleMessage=this.handleMessage.bind(this),window.addEventListener("message",this.handleMessage),this.app.on("frontend:send",this.sendMessage,this),this.once("destroy",this.destroy,this)},t.prototype.postInitialize=function(){this.app.state.snapshot(),this.app.state.set("app.xr",!pc.platform.desktop&&!this.params.noxr),this.app.state.set("app.quality",this.params.quality||"high"),this.app.state.set("app.local",this.params.local),this.app.fire("frontend:send",{type:"IFRAME_READY"}),this.app.fire("loader:request",{scene:this.params.scene})},t.prototype.handleMessage=function(t){t.data&&t.data.type&&this.app.fire(t.data.type,t.data.data)},t.prototype.sendMessage=function(t){t&&t.type&&parent.postMessage(t,"*")},t.prototype.update=function(t){this.app.state.snapshot(),this.app.fire("loader:update",t),this.app.fire("input:update",t),this.app.fire("world:update",t),this.app.fire("ui:update",t)},t.prototype.destroy=function(){window.removeEventListener("message",this.handleMessage),this.app.off("frontend:send",this.sendMessage,this)}})();(()=>{const t=pc.createScript("State");t.prototype.initialize=function(){this.app.state=this,this.snapshots=[],this.clearDebug(),this.once("destroy",this.destroy,this)},t.prototype.snapshot=function(){let t=this.snapshots[0]||{},s={};for(let e in t)t[e]&&t[e].clone?s[e]=t[e].clone():"object"==typeof t[e]?s[e]=JSON.parse(JSON.stringify(t[e])):s[e]=t[e];this.snapshots.unshift(s),this.snapshots.length>2&&this.snapshots.pop(),this.updateDebug()},t.prototype.set=function(t,s){s&&s.clone?this.snapshots[0][t]=s.clone():this.snapshots[0][t]="object"==typeof s?JSON.parse(JSON.stringify(s)):s},t.prototype.get=function(t,s=0){let e=this.snapshots[s]?this.snapshots[s][t]:void 0;return e&&e.clone?e.clone():"object"==typeof e?JSON.parse(JSON.stringify(e)):e},t.prototype.add=function(t,s){let e=this.snapshots[0][t],o=s;return e instanceof pc.Vec3&&o instanceof pc.Vec3||e instanceof pc.Vec2&&o instanceof pc.Vec2?e.add(o):e instanceof Array&&!e.includes(o)?e.push(o):"number"==typeof e&&"number"==typeof o&&(e+=o),this.snapshots[0][t]=e,e},t.prototype.delta=function(t,s=0,e=1){this.snapshots[e]&&this.snapshots[e][t]||(e=s);let o=this.snapshots[s][t],n=this.snapshots[e][t];return o instanceof pc.Vec3&&n instanceof pc.Vec3?(new pc.Vec3).sub2(o,n):o instanceof pc.Vec2&&n instanceof pc.Vec2?(new pc.Vec2).sub2(o,n):"number"==typeof o&&"number"==typeof n?o-n:"string"==typeof o&&"string"==typeof n?o!==n?o:"":"boolean"==typeof o&&"boolean"==typeof n?o-n:void 0},t.prototype.updateDebug=function(){for(let t in this.snapshots[0])window.sessionStorage.setItem(t,this.snapshots[0][t])},t.prototype.clearDebug=function(){window.sessionStorage.clear()},t.prototype.destroy=function(){}})();(()=>{const t=pc.createScript("Loader");t.prototype.initialize=function(){this.params=new URLSearchParams(window.location.search),this.params.autorun=null!==this.params.get("autorun"),this.scene=null,this.tags=[],this.assets=[],this.progress=0,this.time=0,this.restarting=!1,this.app.on("loader:request",this.handleRequest,this),this.app.on("loader:update",this.handleUpdate,this),this.app.on("ui:action",this.handleAction,this),this.once("destroy",this.destroy,this)},t.prototype.handleRequest=function({scene:t}){let s=this.getSceneData(t);this.scene=s.scene,this.tags=s.tags,this.app.state.set("loader.scene",this.scene),this.app.state.set("loader.state","init"),this.app.state.set("loader.progress",0)},t.prototype.getSceneData=function(t){return{scene:"Content",tags:["test","*"]}},t.prototype.handleAction=function(t){switch(t&&t.action){case"start":1===this.app.root.children.length&&this.addSceneHierarchy(this.scene);break;case"restart":this.restarting||(this.restarting=!0,this.unloadPrevScenes(),setTimeout((()=>{this.addSceneHierarchy(this.scene),this.restarting=!1}),500));break;case"stop":this.unloadPrevScenes()}},t.prototype.handleUpdate=function(t){const s=this.app.state.get("app.local");switch(this.app.state.get("loader.state")){case"init":this.unloadPrevScenes(),this.unloadPrevAssets(),this.initNewAssetLoad(),this.progress=0,this.time=0,this.app.state.set("loader.state","loading"),this.app.state.set("loader.progress",0),this.app.fire("frontend:send",{type:"LOAD",active:!0,progress:0});break;case"loading":if(this.progress=.99*this.getCurrentProgress(),this.time+=t,.99===this.progress){let t=this.app.scenes.find(this.scene);t.loaded?(s?this.addSceneHierarchy(t):this.params.autorun&&this.app.fire("ui:action",{action:"start"}),this.progress=1):t.loading||this.app.scenes.loadSceneData(t,(()=>{}))}this.app.state.set("loader.state",this.progress<1?"loading":"complete"),this.app.state.set("loader.progress",this.progress),this.app.fire("frontend:send",{type:"LOAD",active:this.progress<1,progress:this.progress})}},t.prototype.unloadPrevScenes=function(){for(let t of this.app.root.children)"Main"!==t.name&&t.destroy()},t.prototype.unloadPrevAssets=function(){for(let t of this.app.assets.list())if(t.loaded){let s=!0;t.preload&&0===t.tags.size&&(s=!1),t.tags.size>0&&t.tags.has(...this.tags)&&(s=!1),t.tags.has("nounload")&&(s=!1),s&&(t.preload=!1,t.unload())}},t.prototype.initNewAssetLoad=function(t){this.assets=[];for(let s of this.app.assets.list())s.loading||s.loaded||!s.tags.has(...this.tags)||("high"===t&&s.tags.has("hq")||"mid"===t&&s.tags.has("mq")||"low"===t&&s.tags.has("lq")||!s.tags.has("hq")&&!s.tags.has("mq")&&!s.tags.has("lq"))&&this.assets.push(s)},t.prototype.getCurrentProgress=function(t){let s=this.assets.filter((t=>!t.loading&&!t.loaded)),e=this.assets.filter((t=>t.loading&&!t.loaded)),a=this.assets.filter((t=>t.loaded)),i=this.assets.length>0?a.length/this.assets.length:1;if(i<1&&e.length<5&&s.length>0){for(let t=0;t<5-e.length;t++)s[t]&&(s[t].preload=!0);this.app.preload((()=>{}))}return i},t.prototype.addSceneHierarchy=function(t){this.app.scenes.loadSceneHierarchy(t,((s,e)=>{setTimeout((()=>{this.app.scenes.loadSceneSettings(t,(t=>{}))}),1e3)}))},t.prototype.destroy=function(){this.app.off("loader:request",this.handleRequest,this),this.app.off("loader:update",this.handleUpdate,this),this.app.off("ui:action",this.handleAction,this)}})();(()=>{const t=pc.createScript("Input");t.prototype.initialize=function(){const t=.5*this.app.graphicsDevice.canvas.clientWidth,e=.5*this.app.graphicsDevice.canvas.clientHeight;this.data={pointer:{position:new pc.Vec2(t,e),start:new pc.Vec2(0,0),delta:new pc.Vec2(0,0),pressed:!1,clicked:!1,timestamp:0},raycast:{guid:"",type:"",trigger:"",point:null,normal:null}},this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.app.touch?(this.app.graphicsDevice.canvas.addEventListener("touchstart",this.handlePointerDown),this.app.graphicsDevice.canvas.addEventListener("touchmove",this.handlePointerMove),this.app.graphicsDevice.canvas.addEventListener("touchend",this.handlePointerUp),this.app.graphicsDevice.canvas.addEventListener("touchcancel",this.handlePointerUp)):this.app.mouse&&(this.app.graphicsDevice.canvas.addEventListener("mousedown",this.handlePointerDown),this.app.graphicsDevice.canvas.addEventListener("mousemove",this.handlePointerMove),this.app.graphicsDevice.canvas.addEventListener("mouseup",this.handlePointerUp)),this.app.on("input:update",this.handleUpdate,this),this.entity.once("destroy",this.destroy,this)},t.prototype.postInitialize=function(){this.app.state.set("input.pointer.position",this.data.pointer.position),this.app.state.set("input.pointer.delta",this.data.pointer.delta),this.app.state.set("input.pointer.pressed",this.data.pointer.pressed),this.app.state.set("input.pointer.clicked",this.data.pointer.clicked),this.app.state.set("input.pointer.timestamp",this.data.pointer.timestamp),this.app.state.set("input.raycast.guid",this.data.raycast.guid),this.app.state.set("input.raycast.type",this.data.raycast.type),this.app.state.set("input.raycast.trigger",this.data.raycast.trigger),this.app.state.set("input.raycast.point",this.data.raycast.point),this.app.state.set("input.raycast.normal",this.data.raycast.normal)},t.prototype.handlePointerDown=function(t){let e=this.app.touch?t.touches[0].clientX:t.clientX,i=this.app.touch?t.touches[0].clientY:t.clientY;this.data.pointer.position.set(e,i),this.data.pointer.start.set(e,i),this.data.pointer.delta.set(0,0),this.data.pointer.pressed=!0,this.data.pointer.clicked=!1,this.data.pointer.timestamp=Date.now()},t.prototype.handlePointerMove=function(t){let e=this.app.touch?t.touches[0].clientX:t.clientX,i=this.app.touch?t.touches[0].clientY:t.clientY;this.data.pointer.pressed&&(this.data.pointer.delta=new pc.Vec2(e,i).sub(this.data.pointer.position)),this.data.pointer.position.set(e,i)},t.prototype.handlePointerUp=function(t){let e=.001*(Date.now()-this.data.pointer.timestamp),i=this.data.pointer.delta.length();this.data.pointer.delta=new pc.Vec2(0,0),this.data.pointer.pressed=!1,this.data.pointer.clicked=e<=.3&&i<=1},t.prototype.handleUpdate=function(t){this.updatePointerState()},t.prototype.updatePointerState=function(){this.app.state.set("input.pointer.position",this.data.pointer.position),this.app.state.set("input.pointer.delta",this.data.pointer.delta),this.app.state.set("input.pointer.pressed",this.data.pointer.pressed),this.app.state.set("input.pointer.clicked",this.data.pointer.clicked),this.app.state.set("input.pointer.timestamp",this.data.pointer.timestamp),this.data.pointer.clicked&&(this.data.pointer.clicked=!1)},t.prototype.updateRaycastState=function(){if(!this.app.systems.rigidbody||!this.app.systems.rigidbody.dynamicsWorld)return;let t=this.app.systems.camera.cameras[0].entity,e=t.getPosition(),i=t.camera.screenToWorld(this.data.pointer.position.x,this.data.pointer.position.y,100),a=this.app.systems.rigidbody.raycastAll(e,i);a=a.filter((t=>!(t.entity.trigger&&"proximity"===t.entity.trigger.type)));for(let t of a)t.distance=(new pc.Vec3).sub2(e,t.point).length();let s=Math.min(1e3,...a.map((t=>t.distance)));a=a.filter((t=>Math.abs(t.distance-s)<.001)),a=a[0],this.data.raycast.guid=a&&a.entity._guid||"",this.data.raycast.type=a&&a.entity.collision?"trigger":"",this.data.raycast.type=a&&a.entity.rigidbody?"collider":this.data.raycast.type,this.data.raycast.trigger=a&&a.entity.trigger&&a.entity.trigger.id||"",this.data.raycast.point=a?a.point:null,this.data.raycast.normal=a?a.normal:null,this.app.state.set("input.raycast.guid",this.data.raycast.guid),this.app.state.set("input.raycast.type",this.data.raycast.type),this.app.state.set("input.raycast.trigger",this.data.raycast.trigger),this.app.state.set("input.raycast.point",this.data.raycast.point),this.app.state.set("input.raycast.normal",this.data.raycast.normal)},t.prototype.destroy=function(){this.app.touch?(this.app.graphicsDevice.canvas.removeEventListener("touchstart",this.handlePointerDown),this.app.graphicsDevice.canvas.removeEventListener("touchmove",this.handlePointerMove),this.app.graphicsDevice.canvas.removeEventListener("touchend",this.handlePointerUp),this.app.graphicsDevice.canvas.removeEventListener("touchcancel",this.handlePointerUp)):this.app.mouse&&(this.app.graphicsDevice.canvas.removeEventListener("mousedown",this.handlePointerDown),this.app.graphicsDevice.canvas.removeEventListener("mousemove",this.handlePointerMove),this.app.graphicsDevice.canvas.removeEventListener("mouseup",this.handlePointerUp)),this.app.off("input:update",this.handleUpdate,this)}})();(()=>{const e=pc.createScript("XR");e.prototype.initialize=function(){this.observer=null,this.errorObserver=null,this.app.on("xr:realityready",this.handleReady,this),this.app.on("ui:action",this.handleAction,this),this.once("destroy",this.destroy,this)},e.prototype.postInitialize=function(){this.app.state.get("app.local")&&this.preStart()},e.prototype.handleReady=function(){this.app.fire("frontend:send",{type:"XR_LOADED",data:!0})},e.prototype.preStart=async function(){if(!this.app.state.get("app.xr"))return void this.app.fire("frontend:send",{type:"XR_LOADED",data:!0});XRExtras.Loading.showLoading({onxrloaded:this.start.bind(this)});const e=document.querySelector("#requestingCameraPermissions"),t=document.querySelector("#loadBackground"),r=document.querySelector("#loadImage");e.style.display="none",t.style.background="black",r.style.display="none";const s=document.querySelectorAll("#cameraPermissionsErrorApple,#cameraPermissionsErrorAndroid");for(let e=0;e<s.length;e++){s[e].style.background="black"}this.observer=new MutationObserver((e=>{e.forEach((e=>{}))})),this.errorObserver=new MutationObserver((e=>{e.forEach((e=>{e.target.classList.contains("absolute-fill")&&this.app.fire("frontend:send",{type:"CAMERA_PERMISSIONS_ERROR"})}))})),this.observer.observe(t,{attributes:!0,attributeFilter:["class"]});for(let e=0;e<s.length;e++){const t=s[e];this.errorObserver.observe(t,{attributes:!0,attributeFilter:["class"]})}},e.prototype.handleAction=function(e){switch(e&&e.action){case"start":this.preStart();break;case"stop":this.destroy()}},e.prototype.start=function(){this.app.state.get("app.local");this.camera=this.app.systems.camera.cameras[0].entity,this.camera.setPosition(0,1.3,0),this.camera.setEulerAngles(0,0,0),this.camera.camera.layers=this.camera.camera.layers.filter((e=>e!==pc.LAYERID_SKYBOX)),XR8.XrController.configure({disableWorldTracking:!0}),XR8.PlayCanvas.run({pcCamera:this.camera,pcApp:this.app},[XR8.XrController.pipelineModule(),XRExtras.AlmostThere.pipelineModule(),XRExtras.Loading.pipelineModule(),XRExtras.RuntimeError.pipelineModule()])},e.prototype.destroy=function(){this.observer&&this.observer.disconnect(),this.errorObserver&&this.errorObserver.disconnect(),this.app.off("xr:realityready",this.handleReady,this),this.app.off("ui:action",this.handleAction,this)}})();(()=>{const t=pc.createScript("Scene v2");t.attributes.add("video",{title:"Video",type:"entity"}),t.attributes.add("display",{title:"Display",type:"entity"}),t.attributes.add("audio",{title:"Audio",type:"entity"}),t.attributes.add("reveal",{title:"Reveal",type:"json",schema:[{name:"top",title:"Top",type:"entity"},{name:"bottom",title:"Bottom",type:"entity"},{name:"shadow",title:"Shadow",type:"entity"}]}),t.attributes.add("items",{title:"Items",type:"json",array:!0,schema:[{name:"id",title:"Id",type:"string"},{name:"time",title:"Time",type:"number"},{name:"model",title:"Model",type:"entity"},{name:"origin",title:"Origin",type:"entity"},{name:"target",title:"Target",type:"entity"},{name:"overlay",title:"Overlay",type:"entity"}]}),t.attributes.add("deals",{title:"Deals",type:"json",array:!0,schema:[{name:"id",title:"Id",type:"string"},{name:"entity",title:"Entity",type:"entity"},{name:"target",title:"Target",type:"entity"}]}),t.attributes.add("bubbles",{title:"Bubbles",type:"json",array:!0,schema:[{name:"instance",title:"Instance",type:"entity"},{name:"velocity",title:"Velocity",type:"vec3"},{name:"angular",title:"Angular",type:"vec3"}]}),t.attributes.add("curve",{title:"Curve",type:"curve"}),t.prototype.initialize=function(){this.camera=this.app.systems.camera.cameras[0].entity,this.data={state:"idle",time:0,dealIndex:0,action:"",marker:{id:"",active:!1},item:{current:"",rotation:{target:0,current:0}},deals:{logo:[{id:"dominos"}],jacket:[{id:"dominos"}],cup:[{id:"kfc"}],badge:[{id:"tshirt"},{id:"jacket"},{id:"socks"}],vinyl:[{id:"pvr"}],final:[{id:"jacket"}]},skybox:{rotation:0},intro:{complete:!1}},this.app.on("xr:imagefound",this.handleImageFound,this),this.app.on("xr:imageupdated",this.handleImageFound,this),this.app.on("xr:imagelost",this.handleImageLost,this),this.app.on("ui:action",this.handleAction,this),this.app.on("world:update",this.handleUpdate,this),this.once("destroy",this.destroy,this)},t.prototype.postInitialize=function(){this.updateFrontendState(),this.updateFrontendItems(),this.video.setLocalScale(0,0,0),this.camera.addChild(this.video),this.reveal.top.enabled=!1,this.reveal.bottom.enabled=!1,this.reveal.shadow.enabled=!1,this.display.enabled=!1;for(let t of this.items)this.camera.addChild(t.target),this.camera.addChild(t.model),t.collected=!1,t.model.enabled=!1,t.overlay&&(t.overlay.element.opacity=0);for(let t of this.deals)this.camera.addChild(t.entity),this.camera.addChild(t.target),t.model=t.entity.children[0],t.back=t.entity.children[1],t.model.initPos=t.model.getLocalPosition().clone(),t.back&&(t.back.initPos=t.back.getLocalPosition().clone()),t.entity.setLocalPosition(t.target.getLocalPosition().clone()),t.entity.setLocalScale(t.target.getLocalScale().clone()),t.entity.enabled=!1;for(let t of this.bubbles)t.instance.initPos=t.instance.getLocalPosition().clone(),t.instance.initRot=t.instance.getLocalEulerAngles().clone(),t.instance.enabled=!1},t.prototype.handleImageFound=function({name:t}){this.data.marker.id=t,this.data.marker.active=!0},t.prototype.handleImageLost=function(){this.data.marker.active=!1},t.prototype.handleAction=function(t){switch(t&&t.action){case"play":this.play();break;case"skip":this.skip();break;case"pause":this.pause();break;case"resume":this.resume();break;case"update-deals":t.deals&&(this.data.deals=t.deals);break;default:this.data.action=t.action}},t.prototype.handleUpdate=function(t){let e=this.app.state.get("app.xr"),a=this.app.state.get("app.local"),i=this.app.state.get("input.pointer.delta"),o=this.app.state.get("input.pointer.pressed"),s=this.app.state.get("input.pointer.clicked"),n=this.data.state;if(this.app.fire("frontend:send",{type:"MARKER_UPDATE",name:this.data.marker.id,active:!!this.data.marker.id,distance:0,dot:0}),this.data.skybox.rotation+=15*t,this.app.scene.skyboxRotation=(new pc.Quat).setFromAxisAngle(pc.Vec3.UP,this.data.skybox.rotation),this.updateVideoPosition(t),"idle"===this.data.state)(!e&&s||a&&s)&&(this.data.marker.id="placeholder",this.data.marker.active=!0,this.video.setLocalScale(1,1,1)),this.data.marker.active&&(this.pause(0),this.data.state="reveal",this.data.time=0);else if("reveal"===this.data.state)this.updateVideoReveal(this.data.time),this.data.time>=2?(this.play(0),this.data.state="playback",this.data.time=0):this.data.time+=t;else if("playback"===this.data.state){this.data.item.current=this.getNextItemId(),this.data.item.rotation.target=0,this.data.item.rotation.current=0;let e=this.getCurrentItem();if(!e)return;if("logo"===e.id&&this.updateRevealEnd(this.data.time),this.video.video.currentTime>e.time-1&&this.video.video.currentTime<=e.time){let t=1-pc.math.clamp(e.time-this.video.video.currentTime,0,1);this.updateOverlayFadeIn(e,t)}else if(this.video.video.currentTime>e.time&&this.video.video.currentTime<=e.time+1){let t=pc.math.clamp(this.video.video.currentTime-e.time,0,1);this.updateOverlayFadeOut(e,t)}this.updateBubbles(this.video.video.currentTime),this.video.video.currentTime>=e.time&&!e.collected?(this.pause(),this.data.state="fadein",this.data.time=0):this.data.time+=t}else if("fadein"===this.data.state){let e=this.getCurrentItem();this.updateItemTransition(e,"in",this.data.time),this.display.displacement&&(this.display.displacement.time=2*this.data.time),this.data.time>=1?(this.data.state="item",this.data.time=0):this.data.time+=t}else if("item"===this.data.state){let e=this.getCurrentItem();this.updateItemRotation(e,o,i,t),s?(e.collected=!0,this.audio.sound.slot("bubble").play(),this.frontendCollectDeal(),this.updateFrontendDeal(),this.data.state="spin",this.data.time=0):this.data.time+=t}else if("spin"===this.data.state){let e=this.getCurrentItem();this.updateItemSpinning(e,this.data.time),this.data.time>=1.2?(this.data.state="deal",this.data.time=0):this.data.time+=t}else if("deal"===this.data.state){let e=this.getCurrentItem(),a=this.getItemDeals(e),i=1,o=["socks","tshirt","jacket"].includes(a[0].id)?6.5:4.5;this.updateItemTransition(e,"out",2*this.data.time);for(let t=0;t<a.length;t++)i*=this.updateDealTransition(a[t],this.data.time-t*o);1===i?(this.play(),this.data.state="playback",this.data.time=0):(this.data.time+=t,this.data.time>=o*this.data.dealIndex&&(this.updateFrontendDeal(),this.data.dealIndex++))}n!==this.data.state&&this.updateFrontendState()},t.prototype.updateVideoPosition=function(t){let e=new pc.Vec3(0,0,-2),a=this.data.marker.id?new pc.Vec3(1,1,1):new pc.Vec3;this.video.setLocalPosition(e),this.video.setLocalScale(a)},t.prototype.getLookAtQuat=function(t,e){let a=this.video.getRotation().clone();this.video.lookAt(t),this.video.forward.dot(e)<0&&this.video.rotateLocal(0,180,0);let i=this.video.getRotation().clone();return this.video.setRotation(a),i},t.prototype.play=function(t){this.video.video.playbackRate=1,this.video.video.loop=!1,void 0!==t&&(this.video.video.currentTime=t),this.video.video.play().then((()=>{this.audio.sound.slot("teaser").play(),this.audio.sound.slot("teaser").instances[0].currentTime=this.video.video.currentTime,this.audio.sound.volume=1}))},t.prototype.pause=function(t){void 0!==t?(this.video.video.currentTime=t,this.video.video.playbackRate=0,this.audio.sound.slot("teaser").pause()):(this.video.video.pause(),this.audio.sound.slot("teaser").pause())},t.prototype.resume=function(){this.video.video.paused&&this.video.video.currentTime>0&&"playback"===this.data.state&&this.video.video.play().then((()=>{this.audio.sound.slot("teaser").play(),this.audio.sound.slot("teaser").instances[0].currentTime=this.video.video.currentTime}))},t.prototype.skip=function(){this.video.video.currentTime=this.video.video.duration,this.video.video.loop=!1,this.audio.sound.slot("teaser").pause()},t.prototype.updateVideoReveal=function(t){let e=this.reveal.top.children[0].model.model.meshInstances[0].material,a=this.display.render.material;if(t<=.5){let a=pc.math.smootherstep(0,1,2*t),i=.5+.5*a;this.reveal.top.enabled=!0,this.reveal.bottom.enabled=!0,this.reveal.top.setLocalScale(i,i,1),this.reveal.bottom.setLocalScale(i,i,1),e.opacity=a,e.update()}else if(t<1)e.opacity=1,e.update();else if(t<2){let e=pc.math.smootherstep(0,1,t-1),i=1/(.01+.99*e);this.reveal.top.setLocalPosition(0,.95*e-.001,.001),this.reveal.bottom.setLocalPosition(0,-.95*e,0),this.reveal.shadow.enabled=!0,this.reveal.shadow.setLocalScale(.3+.7*e,1,1),this.reveal.shadow.element.opacity=.5*e,this.display.enabled=!0,a.opacityMapTiling=new pc.Vec3(1,i),a.opacityMapOffset=new pc.Vec3(0,-i/2+.5),a.update()}else a.opacityMapTiling=new pc.Vec3(1,.992),a.opacityMapOffset=new pc.Vec3(0,0),a.update()},t.prototype.updateRevealEnd=function(t){let e=this.reveal.top.children[0].model.model.meshInstances[0].material;if(t<.5);else if(t<1){let a=pc.math.smootherstep(0,1,2*t-1);this.reveal.top.setLocalPosition(0,.95+.2*a,0),this.reveal.bottom.setLocalPosition(0,-.95-.2*a,0),e.opacity=1-a,e.update()}else this.reveal.top.enabled=!1,this.reveal.bottom.enabled=!1},t.prototype.updateOverlayFadeIn=function(t,e){let a=pc.math.clamp(pc.math.smoothstep(0,1,e),0,1);t.overlay.setLocalScale(1,3-2*a,1),t.overlay.element.opacity=.8*a},t.prototype.updateOverlayFadeOut=function(t,e){let a=pc.math.clamp(pc.math.smoothstep(0,1,1-e),0,1);t.overlay.element.opacity=.8*a},t.prototype.updateItemTransition=function(t,e,a){let i="in"===e?pc.math.smoothstep(0,1,pc.math.clamp(Math.pow(a,.5),0,1)):1-pc.math.smoothstep(0,1,pc.math.clamp(Math.pow(a,2),0,1)),o="in"===e?pc.math.clamp(2*a,0,1):pc.math.clamp(2*(1-a),0,1);t.target.setLocalRotation(0,0,0,1),t.model.enabled=o>0,t.model.setPosition((new pc.Vec3).lerp(t.origin.getPosition(),t.target.getPosition(),i)),t.model.setRotation((new pc.Quat).slerp(t.origin.getRotation(),t.target.getRotation(),i)),t.model.setLocalScale((new pc.Vec3).lerp(t.origin.getLocalScale().clone().mul(t.origin.parent.getLocalScale()),t.target.getLocalScale(),i));for(let e of t.model.children[0].model.model.meshInstances)e.material.opacity=o,e.material.update()},t.prototype.updateItemSpinning=function(t,e){0===e&&(t.model.initRot=t.model.getLocalEulerAngles().clone());let a=pc.math.smootherstep(0,1,e);if(t.model.initRot.length()<.1){let e=(new pc.Vec3).lerp(t.model.initRot,new pc.Vec3(0,360,0),a);t.model.setLocalEulerAngles(e)}else{let e=(new pc.Quat).setFromEulerAngles(t.model.initRot),i=(new pc.Quat).slerp(e,new pc.Quat,a);t.model.setLocalRotation(i)}},t.prototype.updateItemRotation=function(t,e,a,i){e&&(this.data.item.rotation.target+=a.x),this.data.item.rotation.current=pc.math.lerp(this.data.item.rotation.current,this.data.item.rotation.target,i),t.target.setLocalEulerAngles(0,this.data.item.rotation.current,0),t.model.setLocalRotation(t.target.getLocalRotation().clone())},t.prototype.updateDealTransition=function(t,e){if(0===(e=Math.max(e,0))){let e=Object.keys(t.model.animation.animations)[0];t.entity.enabled=!0,t.model.animation.play(e),t.model.animation.currentTime=0}let a=t.model.animation.currentTime/t.model.animation.duration,i=1;t.model.animation.currentTime<=.5?i=t.model.animation.currentTime/.5:t.model.animation.currentTime>=t.model.animation.duration-.5&&(i=(t.model.animation.duration-t.model.animation.currentTime)/.5);for(let e of t.model.model.model.meshInstances)e.material.opacity=i,e.material.update();if(t.back){let e=this.curve.value(a);t.back.setLocalPosition(t.back.initPos),t.back.translateLocal(0,0,-2*e);for(let a of t.back.model.model.meshInstances)a.material.opacity=1-Math.abs(e),a.material.update();t.back.enabled=1-Math.abs(e)>0}return a},t.prototype.updateBubbles=function(t){let e=pc.math.clamp((t-32.8)/(36.5-32.8),0,1),a=this.bubbles[0].instance.model.model.meshInstances[0].material;for(let t of this.bubbles)t.instance.enabled=e>0&&e<1,t.instance.setLocalPosition(t.instance.initPos),t.instance.translateLocal(t.velocity.clone().mulScalar(e)),t.instance.setLocalEulerAngles(t.instance.initRot),t.instance.rotateLocal(t.angular.clone().mulScalar(e));return e>0&&e<1&&a&&(e<.1?a.opacity=1-(.1-e)/.1:e<.9?a.opacity=1:e<1&&(a.opacity=1-(e-.9)/.1),a.update()),e>0&&e<1},t.prototype.getNextItemId=function(){let t=this.items.filter((t=>this.video.video.currentTime<t.time+1)).sort(((t,e)=>t.time-e.time))[0];return t&&t.id||null},t.prototype.getCurrentItem=function(){return this.items.filter((t=>t.id===this.data.item.current))[0]},t.prototype.getItemDeals=function(t){let e=this.data.deals[t.id].map((t=>t.id)),a=[];for(let t of e)for(let e of this.deals)e.id===t&&a.push(e);return a},t.prototype.updateFrontendState=function(){this.app.fire("frontend:send",{type:"UPDATE_STATE",data:this.data.state})},t.prototype.updateFrontendItems=function(){this.app.fire("frontend:send",{type:"UPDATE_ITEMS",data:this.items.map((t=>t.id))})},t.prototype.updateFrontendDeal=function(){this.app.fire("frontend:send",{type:"UPDATE_LAST_DEAL",data:this.data.deals[this.data.item.current][this.data.dealIndex]})},t.prototype.frontendCollectDeal=function(){this.app.fire("frontend:send",{type:"COLLECTION",data:this.data.item.current}),this.data.dealIndex=0},t.prototype.destroy=function(){for(let t=this.camera.children.length-1;t>=0;t--)this.camera.children[t].destroy(),this.camera.removeChild(this.camera.children[t]);this.app.off("xr:imagefound",this.handleImageFound,this),this.app.off("xr:imageupdated",this.handleImageFound,this),this.app.off("xr:imagelost",this.handleImageLost,this),this.app.off("ui:action",this.handleAction,this),this.app.off("world:update",this.handleUpdate,this)}})();(()=>{const e=pc.createScript("Video");e.attributes.add("asset",{title:"Asset (.bin)",type:"asset",assetType:"binary"}),e.attributes.add("material",{title:"Material",type:"asset",assetType:"material"}),e.prototype.initialize=function(){this.asset.loaded?(this.video=this.createVideo(),this.texture=this.createTexture(),this.linked=!1,this.timestamp=Date.now(),this.frame=0,this.mod=1,this.hasEnded=!1,this.handleReady=this.handleReady.bind(this),this.handlePlay=this.handlePlay.bind(this),this.handleEnded=this.handleEnded.bind(this),this.handleError=this.handleError.bind(this),this.video.addEventListener("canplaythrough",this.handleReady),this.video.addEventListener("play",this.handlePlay),this.video.addEventListener("ended",this.handleEnded),this.video.addEventListener("error",this.handleError),this.once("destroy",this.destroy,this),this.entity.video=this.video,this.video.load()):setTimeout((()=>{this.initialize()}),500)},e.prototype.handleReady=function(){setTimeout((()=>{this&&this.video&&(!this.video.paused&&this.video.currentTime>0?console.log("Video is already playing"):this.video.play().then((()=>{console.log("Video forced autostart")})).catch((e=>{console.error(`Video playback error: ${e}`)})))}),1e3)},e.prototype.handleEnded=function(){this.hasEnded=!0,this.app.fire("frontend:send",{type:"VIDEO_EVENT",data:{action:"ended"}})},e.prototype.handlePlay=function(){this.hasEnded||this.app.fire("frontend:send",{type:"VIDEO_EVENT",data:{action:"play"}})},e.prototype.handleError=function(e){console.error(`Video playback error: ${e}`)},e.prototype.postUpdate=function(e){if(this.video&&!this.video.paused&&this.video.currentTime>0){this.linked||(this.texture.setSource(this.video),this.material.resource.emissiveMap=this.texture,this.material.resource.update(),this.linked=!0);let e=1e3/pc.math.clamp(Date.now-this.timestamp,1,1e6);this.mod=e>100?4:e>70?3:e>40?2:1,this.frame%this.mod==0&&this.texture.upload(),this.timestamp=Date.now(),this.frame++}},e.prototype.createBlobURL=function(){let e="video/mp4";this.asset.name.includes(".webm")&&(e="video/webm"),this.asset.name.includes(".mov")&&(e="video/quicktime");let t=new Blob([this.asset.resource],{type:e});return URL.createObjectURL(t)},e.prototype.createVideo=function(){let e=document.createElement("video");return e.src=this.createBlobURL(),e.id=this.asset.id,e.crossOrigin="anonymous",e.autoplay=!0,e.loop=!0,e.muted=!0,e.playsInline=!0,e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.width="1px",e.style.height="1px",e.style.pointerEvents="none",e.style.opacity="0",e.style.zIndex="-1000",document.body.appendChild(e),e},e.prototype.createTexture=function(){return new pc.Texture(this.app.graphicsDevice,{width:540,height:960,format:pc.PIXELFORMAT_RGBA8,minFilter:pc.FILTER_LINEAR_MIPMAP_LINEAR,magFilter:pc.FILTER_LINEAR,addressU:pc.ADDRESS_CLAMP_TO_EDGE,addressV:pc.ADDRESS_CLAMP_TO_EDGE,anisotropy:this.app.graphicsDevice.maxAnisotropy,mipmaps:!0})},e.prototype.destroy=function(){this.video.removeEventListener("canplaythrough",this.handleReady),this.video.removeEventListener("play",this.handlePlay),this.video.removeEventListener("ended",this.handleEnded),this.video.removeEventListener("error",this.handleError),URL.revokeObjectURL(this.video.src),this.texture.destroy(),this.video.pause(),this.video.src="",this.video.removeAttribute("src"),document.body.removeChild(this.video)}})();(()=>{const t=pc.createScript("Highlight");t.attributes.add("material",{title:"Material",type:"asset",assetType:"material"}),t.attributes.add("fps",{title:"FPS",type:"number",min:.1,default:16}),t.attributes.add("loop",{title:"Loop",type:"number",min:0,default:4}),t.prototype.initialize=function(){this.data={playing:!1,frame:{current:0,timestamp:0}},this.once("destroy",this.destroy,this)},t.prototype.postInitialize=function(){this.entity.sprite={play:this.handlePlay.bind(this),opacity:this.handleOpacity.bind(this)}},t.prototype.handlePlay=function(){this.data.playing=!0,this.data.frame.current=0,this.data.frame.timestamp=Date.now()},t.prototype.handleOpacity=function(t){this.material.resource.emissiveIntensity=pc.math.clamp(t,0,1),this.material.resource.update()},t.prototype.update=function(){if(this.data.playing){.001*(Date.now()-this.data.frame.timestamp)>1/this.fps&&(this.data.frame.current+=1,this.data.frame.current>15&&(this.data.frame.current=this.loop),this.data.frame.timestamp=Date.now());let t=this.data.frame.current%4,e=3-Math.floor((this.data.frame.current-t)/4);this.material.resource.emissveMapOffset=new pc.Vec2(.25*t,.25*e),this.material.resource.opacityMapOffset=new pc.Vec2(.25*t,.25*e),this.material.resource.update()}},t.prototype.destroy=function(){}})();(()=>{const t=pc.createScript("Displacement");t.prototype.initialize=function(){this.material=this.entity.render.meshInstances[0].material,this.once("destroy",this.destroy,this)},t.prototype.postInitialize=function(){this.entity.displacement={time:0};let t=pc.createPlane(this.app.graphicsDevice,{widthSegments:540,lengthSegments:960}),e=new pc.MeshInstance(t,this.material);this.entity.render.meshInstances=[e],this.material.chunks.APIVersion=pc.CHUNKAPI_1_65,this.material.chunks.transformVS="\n        mat4 getModelMatrix ()\n        {\n            return matrix_model;\n        }\n\n        uniform sampler2D displacement;\n        uniform float focal;\n        uniform float time;\n        float PI = 3.1415;\n        \n        vec4 getPosition ()\n        {\n            vec3 localPos = vertex_position;\n\n            vec3 localPos1 = localPos * vec3 (1, 1, 16.0 / 9.0);\n            float distance = distance (localPos1, vec3 (0, 0, 0));\n            float k = 0.5 * sin (PI * time - 0.5 * PI) + 0.5;\n            float exp = exp (-10.0 * (distance - 0.63 * time) * (distance - 0.63 * time));\n            localPos.y += 30.0 * k * exp * cos (10.0 * distance - 2.0 * PI * time);\n\n            // vec2 coords = vec2 (0.5, 1.0) * vertex_texCoord0 + vec2 (0.5, 0.0);\n            // float disparity = texture (displacement, coords).r;\n            // disparity = max (disparity, 0.1);\n\n            // float depth = (1.0 - disparity) / disparity;\n            // localPos = mix (vec3 (0, focal, 0), localPos, 1.0 + depth);\n\n            dModelMatrix = getModelMatrix ();\n            vec4 posW = dModelMatrix * vec4 (localPos, 1.0);\n            dPositionW = posW.xyz;\n\n            vec4 screenPos = matrix_viewProjection * posW;\n            return screenPos;\n        }\n\n        vec3 getWorldPosition ()\n        {\n            return dPositionW;\n        }\n    ",this.material.setParameter("displacement",this.material.emissiveMap),this.material.setParameter("focal",100),this.material.update()},t.prototype.update=function(){let t=this.app.systems.camera.cameras[0].entity,e=this.entity.parent.getLocalScale().x,i=this.entity.parent.parent.getLocalScale().x,a=1/Math.max(e*i,.01)*this.entity.getPosition().distance(t.getPosition());this.material.setParameter("displacement",this.material.emissiveMap),this.material.setParameter("focal",a),this.entity.displacement&&this.material.setParameter("time",this.entity.displacement.time)},t.prototype.destroy=function(){}})();(()=>{const e=pc.createScript("Color Grading");e.attributes.add("lut",{title:"LUT",type:"asset",assetType:"texture"}),e.attributes.add("materials",{title:"Materials",type:"asset",assetType:"material",array:!0}),e.prototype.initialize=function(){this.on("attr:lut",this.handleLut,this),this.once("destroy",this.destroy,this)},e.prototype.postInitialize=function(){for(let e of this.materials)e.resource.chunks.APIVersion=pc.CHUNKAPI_1_65,e.resource.chunks.diffusePS="\n            uniform sampler2D uLut;\n\n            vec3 lookup (in vec3 color, in sampler2D lut)\n            {\n                float blueColor = color.b * 63.0;\n\n                vec2 quad1;\n                quad1.y = floor (floor (blueColor) / 8.0);\n                quad1.x = floor (blueColor) - (quad1.y * 8.0);\n\n                vec2 quad2;\n                quad2.y = floor (ceil (blueColor) / 8.0);\n                quad2.x = ceil (blueColor) - (quad2.y * 8.0);\n\n                vec2 texPos1;\n                texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n                texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n\n                vec2 texPos2;\n                texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n                texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n\n                vec3 color1 = texture2D (lut, texPos1).rgb;\n                vec3 color2 = texture2D (lut, texPos2).rgb;\n\n                return mix (color1, color2, fract (blueColor));\n            }\n\n            #ifdef MAPCOLOR\n            uniform vec3 material_diffuse;\n            #endif\n\n            void getAlbedo ()\n            {\n                dAlbedo = vec3(1.0);\n\n                #ifdef MAPCOLOR\n                dAlbedo *= material_diffuse.rgb;\n                #endif\n\n                #ifdef MAPTEXTURE\n                vec3 albedoBase = $DECODE(texture2DBias($SAMPLER, $UV, textureBias)).$CH;\n                dAlbedo *= addAlbedoDetail(albedoBase);\n                #endif\n\n                #ifdef MAPVERTEX\n                dAlbedo *= gammaCorrectInput(saturate(vVertexColor.$VC));\n                #endif\n            }\n        ",e.resource.chunks.endPS="\n            gl_FragColor.rgb = combineColor(litArgs_albedo, litArgs_sheen_specularity, litArgs_clearcoat_specularity);\n\n            gl_FragColor.rgb += litArgs_emission;\n            gl_FragColor.rgb = addFog(gl_FragColor.rgb);\n\n            #ifndef HDR\n            gl_FragColor.rgb = toneMap (gl_FragColor.rgb);\n            gl_FragColor.rgb = gammaCorrectOutput (gl_FragColor.rgb);\n            gl_FragColor.rgb = lookup (gl_FragColor.rgb, uLut);\n            #endif\n        ",e.resource.setParameter("uLut",this.lut.resource),e.resource.update()},e.prototype.handleLut=function(){for(let e of this.materials)e.resource.setParameter("uLut",this.lut.resource),e.resource.update()},e.prototype.destroy=function(){this.off("attr:lut",this.handleLut,this)}})();(()=>{const t=pc.createScript("UI > Preloader");t.attributes.add("background",{title:"Background",type:"entity"}),t.attributes.add("progress",{title:"Progress",type:"entity"}),t.prototype.initialize=function(){this.app.on("ui:update",this.handleUpdate,this),this.once("destroy",this.destroy,this)},t.prototype.handleUpdate=function(t){let e="complete"!==this.app.state.get("loader.state"),i=this.app.state.get("loader.progress");this.progress.element.text=Math.round(100*i)+"%",this.entity.enabled=e},t.prototype.destroy=function(){this.app.off("ui:update",this.handleUpdate,this)}})();